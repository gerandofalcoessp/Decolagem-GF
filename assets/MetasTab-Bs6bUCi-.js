import{j as e}from"./ui-C_BmRRy8.js";import{C as a}from"./Card-CcnntGPu.js";import{B as s}from"./Button-BrWxLG0o.js";import{GoalService as r}from"./goalService-CiO3WuHw.js";import{g as t}from"./index-BviM__eE.js";import{t as o}from"./icons-TwYroKGA.js";import"./vendor-Psgnp9ei.js";import"./router-DVMx2JKX.js";import"./query-BI71cv7L.js";import"./supabase-CfsjXCJe.js";import"./forms-BADiA78i.js";import"./utils-CwAUyRUs.js";import"./charts-C4lFoNLr.js";function i({metas:i,setShowNewMetaModal:n,setEditingMeta:m,setNewMeta:l,setShowEditMetaModal:d,mesesDisponiveis:c,regionaisDisponiveis:x,metasLoading:g,metasError:h,refetchGoals:u}){const{showError:j,showConfirmation:p}=t();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Configuração de Metas"}),e.jsx("p",{className:"text-gray-600 mt-1 text-sm",children:"Configure e gerencie as metas do programa"})]}),e.jsxs(s,{className:"bg-blue-600 hover:bg-blue-700",onClick:()=>n(!0),children:[e.jsx(o,{className:"w-4 h-4 mr-2"}),"Nova Meta"]})]}),g&&e.jsx(a,{children:e.jsx("div",{className:"p-6 text-sm text-gray-600",children:"Carregando metas..."})}),h&&!g&&e.jsx(a,{children:e.jsx("div",{className:"p-6 text-sm text-red-600",children:"Erro ao carregar metas."})}),!g&&!h&&e.jsx(a,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Metas do Programa"}),i&&0!==i.length?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map((a,s)=>{var t;return e.jsxs("div",{className:"flex flex-col p-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border border-blue-200 hover:from-blue-100 hover:to-indigo-100 hover:border-blue-300 hover:shadow-md transition-all duration-200 cursor-pointer transform hover:scale-105",children:[e.jsxs("div",{className:"flex-1 mb-3",children:[e.jsx("p",{className:"font-medium text-gray-900 text-sm",children:a.nome}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Retenção Decolagem"===a.nome||"Retenção Maras"===a.nome?"Porcentagem":"Quantidade",": ",a.quantidade,"Retenção Decolagem"===a.nome||"Retenção Maras"===a.nome?"%":""]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Período:"," ",Array.isArray(a.mes)?a.mes.includes("todo-ano")?"Todo o ano":a.mes.map(e=>{var a;return(null==(a=c.find(a=>a.value===e))?void 0:a.label)||e}).join(", "):(null==(t=c.find(e=>e.value===a.mes))?void 0:t.label)||a.mes,"/",a.ano]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Área:"," ",(()=>{const e=Array.isArray(a.regionais)?a.regionais:"string"==typeof a.regionais&&a.regionais.includes(",")?a.regionais.split(",").map(e=>e.trim()):a.regionais?[a.regionais]:[];return e.length===x.length?"Todas":e.join(", ")})()]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"text-sm text-gray-600 hover:text-gray-800 px-2 py-1 rounded hover:bg-gray-100",onClick:()=>{m(a),l({nome:a.nome,nomePersonalizado:"Outra"===a.nome?a.nome:"",quantidade:a.quantidade,mes:Array.isArray(a.mes)?a.mes:[a.mes],ano:a.ano,regionais:[...a.regionais]}),d(!0)},children:"Editar"}),e.jsx("button",{className:"text-sm text-red-600 hover:text-red-800 px-2 py-1 rounded hover:bg-red-50",onClick:()=>(async e=>{if(await p({title:"Confirmar exclusão",message:`Tem certeza que deseja excluir a meta "${e.nome}"?`,onConfirm:()=>{},confirmText:"Excluir",cancelText:"Cancelar"}))try{await r.deleteGoal(e.id),u&&await u()}catch(a){j("Erro ao excluir meta")}})(a),children:"Excluir"})]})]},a.id??s)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(o,{className:"w-12 h-12 mx-auto"})}),e.jsx("p",{className:"text-gray-600 mb-2 text-sm",children:"Nenhuma meta criada ainda"}),e.jsx("p",{className:"text-sm text-gray-500",children:'Clique em "Nova Meta" para criar sua primeira meta'})]})]})})]})}export{i as default};
