const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/goalService-Cb-uZcTs.js","assets/ui-C_BmRRy8.js","assets/vendor-Psgnp9ei.js","assets/router-DVMx2JKX.js","assets/query-BI71cv7L.js","assets/supabase-CfsjXCJe.js","assets/icons-sb5RvF5O.js","assets/forms-BADiA78i.js","assets/utils-CwAUyRUs.js","assets/charts-C4lFoNLr.js","assets/DashboardMetasPage-BSNAIo7H.js","assets/constants-CdNJpgjE.js","assets/CalendarioPage-C7mh3jCh.js","assets/Card-C21MRrmW.js","assets/Button-DjYkO9ZW.js","assets/MonthGrid-BmLISOxp.js","assets/index-Bn5au-xE.js","assets/RegionalCalendarioPage-FhjQA_ht.js","assets/ConfirmModal-BrpGP1dR.js","assets/AsMarasPage-Cju6idvd.js","assets/MicrocreditoPage-CFb_7Say.js","assets/DecolagemPage-De4vhplQ.js","assets/RegionaisPage-B9PxnmtP.js","assets/NotificationModal-DxK041da.js","assets/GestaoAtividadesRegionaisPage-DwKj1cxg.js","assets/EditarAtividadeRegionalPage-DMWOTvNg.js","assets/OngCadastroPage-Bnltl6Nr.js","assets/OngListPage-BfPI8fwT.js","assets/OngDetalhesPage-Cv_mUxge.js","assets/Configuracoes-CPqv15Oi.js"])))=>i.map(i=>d[i]);
import{j as e}from"./ui-C_BmRRy8.js";import{b as t,r as a,c as r,a as s}from"./vendor-Psgnp9ei.js";import{u as o,a as n,L as i,N as l,R as c,b as d,B as u}from"./router-DVMx2JKX.js";import{u as m,a as h,b as g,Q as p,c as f}from"./query-BI71cv7L.js";import{c as x,_ as v}from"./supabase-CfsjXCJe.js";import{X as y,I as b,A as w,a as j,C as N,H as E,T as S,M as _,B as C,b as k,S as A,c as M,d as I,L as P,E as T,e as O,f as L,g as z,h as D,i as $,U as F,R,P as B,j as q,k as V,l as J,m as H,n as U,o as W,p as G}from"./icons-sb5RvF5O.js";import{o as K,r as Z,a as Q,b as Y,s as X,u as ee}from"./forms-BADiA78i.js";import{t as te,c as ae}from"./utils-CwAUyRUs.js";import{C as re,a as se,L as oe,P as ne,b as ie,A as le,p as ce,c as de,d as ue,i as me,B as he,e as ge,D as pe,f as fe}from"./charts-C4lFoNLr.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var xe={},ve=t;xe.createRoot=ve.createRoot,xe.hydrateRoot=ve.hydrateRoot;let ye,be,we,je={data:""},Ne=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Ee=/\/\*[^]*?\*\/|  +/g,Se=/\n+/g,_e=(e,t)=>{let a="",r="",s="";for(let o in e){let n=e[o];"@"==o[0]?"i"==o[1]?a=o+" "+n+";":r+="f"==o[1]?_e(n,o):o+"{"+_e(n,"k"==o[1]?"":t)+"}":"object"==typeof n?r+=_e(n,t?t.replace(/([^,])+/g,e=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):o):null!=n&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=_e.p?_e.p(o,n):o+":"+n+";")}return a+(t&&s?t+"{"+s+"}":s)+r},Ce={},ke=e=>{if("object"==typeof e){let t="";for(let a in e)t+=a+ke(e[a]);return t}return e};function Ae(e){let t=this||{},a=e.call?e(t.p):e;return((e,t,a,r,s)=>{let o=ke(e),n=Ce[o]||(Ce[o]=(e=>{let t=0,a=11;for(;t<e.length;)a=101*a+e.charCodeAt(t++)>>>0;return"go"+a})(o));if(!Ce[n]){let t=o!==e?e:(e=>{let t,a,r=[{}];for(;t=Ne.exec(e.replace(Ee,""));)t[4]?r.shift():t[3]?(a=t[3].replace(Se," ").trim(),r.unshift(r[0][a]=r[0][a]||{})):r[0][t[1]]=t[2].replace(Se," ").trim();return r[0]})(e);Ce[n]=_e(s?{["@keyframes "+n]:t}:t,a?"":"."+n)}let i=a&&Ce.g?Ce.g:null;return a&&(Ce.g=Ce[n]),l=Ce[n],c=t,d=r,(u=i)?c.data=c.data.replace(u,l):-1===c.data.indexOf(l)&&(c.data=d?l+c.data:c.data+l),n;var l,c,d,u})(a.unshift?a.raw?((e,t,a)=>e.reduce((e,r,s)=>{let o=t[s];if(o&&o.call){let e=o(a),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;o=t?"."+t:e&&"object"==typeof e?e.props?"":_e(e,""):!1===e?"":e}return e+r+(null==o?"":o)},""))(a,[].slice.call(arguments,1),t.p):a.reduce((e,a)=>Object.assign(e,a&&a.call?a(t.p):a),{}):a,(e=>{if("object"==typeof window){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||je})(t.target),t.g,t.o,t.k)}Ae.bind({g:1});let Me=Ae.bind({k:1});function Ie(e,t){let a=this||{};return function(){let t=arguments;return function r(s,o){let n=Object.assign({},s),i=n.className||r.className;a.p=Object.assign({theme:be&&be()},n),a.o=/ *go\d+/.test(i),n.className=Ae.apply(a,t)+(i?" "+i:"");let l=e;return e[0]&&(l=n.as||e,delete n.as),we&&l[0]&&we(n),ye(l,n)}}}var Pe=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,Te=(()=>{let e=0;return()=>(++e).toString()})(),Oe=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Le="default",ze=(e,t)=>{let{toastLimit:a}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,a)};case 1:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case 2:let{toast:r}=t;return ze(e,{type:e.toasts.find(e=>e.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,dismissed:!0,visible:!1}:e)};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let o=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(e=>({...e,pauseDuration:e.pauseDuration+o}))}}},De=[],$e={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},Fe={},Re=(e,t=Le)=>{Fe[t]=ze(Fe[t]||$e,e),De.forEach(([e,a])=>{e===t&&a(Fe[t])})},Be=e=>Object.keys(Fe).forEach(t=>Re(e,t)),qe=(e=Le)=>t=>{Re(t,e)},Ve={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Je=e=>(t,a)=>{let r=((e,t="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...a,id:(null==a?void 0:a.id)||Te()}))(t,e,a);return qe(r.toasterId||(e=>Object.keys(Fe).find(t=>Fe[t].toasts.some(t=>t.id===e)))(r.id))({type:2,toast:r}),r.id},He=(e,t)=>Je("blank")(e,t);He.error=Je("error"),He.success=Je("success"),He.loading=Je("loading"),He.custom=Je("custom"),He.dismiss=(e,t)=>{let a={type:3,toastId:e};t?qe(t)(a):Be(a)},He.dismissAll=e=>He.dismiss(void 0,e),He.remove=(e,t)=>{let a={type:4,toastId:e};t?qe(t)(a):Be(a)},He.removeAll=e=>He.remove(void 0,e),He.promise=(e,t,a)=>{let r=He.loading(t.loading,{...a,...null==a?void 0:a.loading});return"function"==typeof e&&(e=e()),e.then(e=>{let s=t.success?Pe(t.success,e):void 0;return s?He.success(s,{id:r,...a,...null==a?void 0:a.success}):He.dismiss(r),e}).catch(e=>{let s=t.error?Pe(t.error,e):void 0;s?He.error(s,{id:r,...a,...null==a?void 0:a.error}):He.dismiss(r)}),e};var Ue,We,Ge,Ke,Ze=(e,t="default")=>{let{toasts:r,pausedAt:s}=((e={},t=Le)=>{let[r,s]=a.useState(Fe[t]||$e),o=a.useRef(Fe[t]);a.useEffect(()=>(o.current!==Fe[t]&&s(Fe[t]),De.push([t,s]),()=>{let e=De.findIndex(([e])=>e===t);e>-1&&De.splice(e,1)}),[t]);let n=r.toasts.map(t=>{var a,r,s;return{...e,...e[t.type],...t,removeDelay:t.removeDelay||(null==(a=e[t.type])?void 0:a.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(r=e[t.type])?void 0:r.duration)||(null==e?void 0:e.duration)||Ve[t.type],style:{...e.style,...null==(s=e[t.type])?void 0:s.style,...t.style}}});return{...r,toasts:n}})(e,t),o=a.useRef(new Map).current,n=a.useCallback((e,t=1e3)=>{if(o.has(e))return;let a=setTimeout(()=>{o.delete(e),i({type:4,toastId:e})},t);o.set(e,a)},[]);a.useEffect(()=>{if(s)return;let e=Date.now(),a=r.map(a=>{if(a.duration===1/0)return;let r=(a.duration||0)+a.pauseDuration-(e-a.createdAt);if(!(r<0))return setTimeout(()=>He.dismiss(a.id,t),r);a.visible&&He.dismiss(a.id)});return()=>{a.forEach(e=>e&&clearTimeout(e))}},[r,s,t]);let i=a.useCallback(qe(t),[t]),l=a.useCallback(()=>{i({type:5,time:Date.now()})},[i]),c=a.useCallback((e,t)=>{i({type:1,toast:{id:e,height:t}})},[i]),d=a.useCallback(()=>{s&&i({type:6,time:Date.now()})},[s,i]),u=a.useCallback((e,t)=>{let{reverseOrder:a=!1,gutter:s=8,defaultPosition:o}=t||{},n=r.filter(t=>(t.position||o)===(e.position||o)&&t.height),i=n.findIndex(t=>t.id===e.id),l=n.filter((e,t)=>t<i&&e.visible).length;return n.filter(e=>e.visible).slice(...a?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+s,0)},[r]);return a.useEffect(()=>{r.forEach(e=>{if(e.dismissed)n(e.id,e.removeDelay);else{let t=o.get(e.id);t&&(clearTimeout(t),o.delete(e.id))}})},[r,n]),{toasts:r,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:u}}},Qe=Me`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Ye=Me`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Xe=Me`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,et=Ie("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Qe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Ye} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Xe} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,tt=Me`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,at=Ie("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${tt} 1s linear infinite;
`,rt=Me`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,st=Me`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,ot=Ie("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${rt} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${st} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,nt=Ie("div")`
  position: absolute;
`,it=Ie("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,lt=Me`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ct=Ie("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${lt} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,dt=({toast:e})=>{let{icon:t,type:r,iconTheme:s}=e;return void 0!==t?"string"==typeof t?a.createElement(ct,null,t):t:"blank"===r?null:a.createElement(it,null,a.createElement(at,{...s}),"loading"!==r&&a.createElement(nt,null,"error"===r?a.createElement(et,{...s}):a.createElement(ot,{...s})))},ut=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,mt=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,ht=Ie("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,gt=Ie("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,pt=a.memo(({toast:e,position:t,style:r,children:s})=>{let o=e.height?((e,t)=>{let a=e.includes("top")?1:-1,[r,s]=Oe()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[ut(a),mt(a)];return{animation:t?`${Me(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Me(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(e.position||t||"top-center",e.visible):{opacity:0},n=a.createElement(dt,{toast:e}),i=a.createElement(gt,{...e.ariaProps},Pe(e.message,e));return a.createElement(ht,{className:e.className,style:{...o,...r,...e.style}},"function"==typeof s?s({icon:n,message:i}):a.createElement(a.Fragment,null,n,i))});Ue=a.createElement,_e.p=We,ye=Ue,be=Ge,we=Ke;var ft=({id:e,className:t,style:r,onHeightUpdate:s,children:o})=>{let n=a.useCallback(t=>{if(t){let a=()=>{let a=t.getBoundingClientRect().height;s(e,a)};a(),new MutationObserver(a).observe(t,{subtree:!0,childList:!0,characterData:!0})}},[e,s]);return a.createElement("div",{ref:n,className:t,style:r},o)},xt=Ae`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,vt=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:s,children:o,toasterId:n,containerStyle:i,containerClassName:l})=>{let{toasts:c,handlers:d}=Ze(r,n);return a.createElement("div",{"data-rht-toaster":n||"",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...i},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(r=>{let n=r.position||t,i=((e,t)=>{let a=e.includes("top"),r=a?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Oe()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(a?1:-1)}px)`,...r,...s}})(n,d.calculateOffset(r,{reverseOrder:e,gutter:s,defaultPosition:t}));return a.createElement(ft,{id:r.id,key:r.id,onHeightUpdate:d.updateHeight,className:r.visible?xt:"",style:i},"custom"===r.type?Pe(r.message,r):o?o(r):a.createElement(pt,{toast:r,position:n}))}))},yt=He;const bt=e=>{let t;const a=new Set,r=(e,r)=>{const s="function"==typeof e?e(t):e;if(!Object.is(s,t)){const e=t;t=(null!=r?r:"object"!=typeof s||null===s)?s:Object.assign({},t,s),a.forEach(a=>a(t,e))}},s=()=>t,o={setState:r,getState:s,getInitialState:()=>n,subscribe:e=>(a.add(e),()=>a.delete(e)),destroy:()=>{a.clear()}},n=t=e(r,s,o);return o};var wt={exports:{}},jt={},Nt={exports:{}},Et={},St=a;var _t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Ct=St.useState,kt=St.useEffect,At=St.useLayoutEffect,Mt=St.useDebugValue;function It(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!_t(e,a)}catch(r){return!0}}var Pt="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var a=t(),r=Ct({inst:{value:a,getSnapshot:t}}),s=r[0].inst,o=r[1];return At(function(){s.value=a,s.getSnapshot=t,It(s)&&o({inst:s})},[e,a,t]),kt(function(){return It(s)&&o({inst:s}),e(function(){It(s)&&o({inst:s})})},[e]),Mt(a),a};Et.useSyncExternalStore=void 0!==St.useSyncExternalStore?St.useSyncExternalStore:Pt,Nt.exports=Et;var Tt=Nt.exports,Ot=a,Lt=Tt;
/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zt="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Dt=Lt.useSyncExternalStore,$t=Ot.useRef,Ft=Ot.useEffect,Rt=Ot.useMemo,Bt=Ot.useDebugValue;jt.useSyncExternalStoreWithSelector=function(e,t,a,r,s){var o=$t(null);if(null===o.current){var n={hasValue:!1,value:null};o.current=n}else n=o.current;o=Rt(function(){function e(e){if(!l){if(l=!0,o=e,e=r(e),void 0!==s&&n.hasValue){var t=n.value;if(s(t,e))return i=t}return i=e}if(t=i,zt(o,e))return t;var a=r(e);return void 0!==s&&s(t,a)?(o=e,t):(o=e,i=a)}var o,i,l=!1,c=void 0===a?null:a;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,a,r,s]);var i=Dt(e,o[0],o[1]);return Ft(function(){n.hasValue=!0,n.value=i},[i]),Bt(i),i},wt.exports=jt;const qt=r(wt.exports),Vt={},{useDebugValue:Jt}=s,{useSyncExternalStoreWithSelector:Ht}=qt;let Ut=!1;const Wt=e=>e;const Gt=e=>{const t="function"==typeof e?(e=>e?bt(e):bt)(e):e,a=(e,a)=>function(e,t=Wt,a){"production"!==(Vt?"production":void 0)&&a&&!Ut&&(Ut=!0);const r=Ht(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,a);return Jt(r),r}(t,e,a);return Object.assign(a,t),a},Kt=e=>e?Gt(e):Gt;function Zt(e,t){let a;try{a=e()}catch(r){return}return{getItem:e=>{var t;const r=e=>null===e?null:JSON.parse(e,void 0),s=null!=(t=a.getItem(e))?t:null;return s instanceof Promise?s.then(r):r(s)},setItem:(e,t)=>a.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>a.removeItem(e)}}const Qt=e=>t=>{try{const a=e(t);return a instanceof Promise?a:{then:e=>Qt(e)(a),catch(e){return this}}}catch(Ue){return{then(e){return this},catch:t=>Qt(t)(Ue)}}},Yt=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((e,t)=>(a,r,s)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},n=!1;const i=new Set,l=new Set;let c;try{c=o.getStorage()}catch(f){}if(!c)return e((...e)=>{a(...e)},r,s);const d=Qt(o.serialize),u=()=>{const e=o.partialize({...r()});let t;const a=d({state:e,version:o.version}).then(e=>c.setItem(o.name,e)).catch(e=>{t=e});if(t)throw t;return a},m=s.setState;s.setState=(e,t)=>{m(e,t),u()};const h=e((...e)=>{a(...e),u()},r,s);let g;const p=()=>{var e;if(!c)return;n=!1,i.forEach(e=>e(r()));const t=(null==(e=o.onRehydrateStorage)?void 0:e.call(o,r()))||void 0;return Qt(c.getItem.bind(c))(o.name).then(e=>{if(e)return o.deserialize(e)}).then(e=>{if(e){if("number"!=typeof e.version||e.version===o.version)return e.state;if(o.migrate)return o.migrate(e.state,e.version)}}).then(e=>{var t;return g=o.merge(e,null!=(t=r())?t:h),a(g,!0),u()}).then(()=>{null==t||t(g,void 0),n=!0,l.forEach(e=>e(g))}).catch(e=>{null==t||t(void 0,e)})};return s.persist={setOptions:e=>{o={...o,...e},e.getStorage&&(c=e.getStorage())},clearStorage:()=>{null==c||c.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>p(),hasHydrated:()=>n,onHydrate:e=>(i.add(e),()=>{i.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},p(),g||h})(e,t):((e,t)=>(a,r,s)=>{let o={storage:Zt(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},n=!1;const i=new Set,l=new Set;let c=o.storage;if(!c)return e((...e)=>{a(...e)},r,s);const d=()=>{const e=o.partialize({...r()});return c.setItem(o.name,{state:e,version:o.version})},u=s.setState;s.setState=(e,t)=>{u(e,t),d()};const m=e((...e)=>{a(...e),d()},r,s);let h;s.getInitialState=()=>m;const g=()=>{var e,t;if(!c)return;n=!1,i.forEach(e=>{var t;return e(null!=(t=r())?t:m)});const s=(null==(t=o.onRehydrateStorage)?void 0:t.call(o,null!=(e=r())?e:m))||void 0;return Qt(c.getItem.bind(c))(o.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===o.version)return[!1,e.state];if(o.migrate)return[!0,o.migrate(e.state,e.version)]}return[!1,void 0]}).then(e=>{var t;const[s,n]=e;if(h=o.merge(n,null!=(t=r())?t:m),a(h,!0),s)return d()}).then(()=>{null==s||s(h,void 0),h=r(),n=!0,l.forEach(e=>e(h))}).catch(e=>{null==s||s(void 0,e)})};return s.persist={setOptions:e=>{o={...o,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>g(),hasHydrated:()=>n,onHydrate:e=>(i.add(e),()=>{i.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},o.skipHydration||g(),h||m})(e,t),Xt=(...e)=>{},ea=(...e)=>{};let ta="https://decolagem-gf-frontend.vercel.app".trim();ta||(ta=window.location.origin);const aa=ta.replace(/\/+$/,"");class ra{static getAuthHeaders(){if("undefined"==typeof window)return{};const e=localStorage.getItem("auth_token")||localStorage.getItem("access_token")||localStorage.getItem("token");return e?{Authorization:`Bearer ${e}`}:{}}static async postJsonWithFallback(e,t,a={}){const r=`${aa}${e}`,s=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json",...a},body:JSON.stringify(t)});if(!s)throw new Error("Network error");return s}static async login(e,t){var a;let r;try{r=await this.postJsonWithFallback("/api/auth/login",{email:e,password:t})}catch(s){throw s}try{const e=r.headers.get("content-type")||"";let t=null,s=null;if(e.includes("application/json"))try{t=await r.json()}catch(Ue){s=await r.text().catch(()=>"")}else s=await r.text().catch(()=>"");if(!r.ok){const e=t&&t.error?t.error:s||`Erro no login (HTTP ${r.status})`;throw new Error(e)}if(!t)try{t=s?JSON.parse(s):{}}catch{throw new Error("Resposta do servidor inválida: conteúdo não JSON")}return"undefined"!=typeof window&&(null==(a=t.session)?void 0:a.access_token)&&(localStorage.setItem("auth_token",t.session.access_token),localStorage.setItem("refresh_token",t.session.refresh_token)),t}catch(s){throw s}}static async logout(){try{if("undefined"==typeof window)return;localStorage.getItem("auth_token")&&await fetch(`${aa}/api/auth/logout`,{method:"POST",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"}})}catch(e){ea("Erro no logout:",e)}finally{"undefined"!=typeof window&&(localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("auth-storage"))}}static async getCurrentUser(){try{if("undefined"==typeof window)return null;Xt("🔍 AuthService: Verificando token no localStorage");if(!localStorage.getItem("auth_token"))return Xt("❌ AuthService: Nenhum token encontrado"),null;Xt("📡 AuthService: Fazendo requisição para /auth/me");const e=await fetch(`${aa}/api/auth/me`,{headers:this.getAuthHeaders()});if(!e.ok){if(Xt("❌ AuthService: Resposta não OK:",e.status),401===e.status)return Xt("🗑️ AuthService: Token inválido, limpando dados"),this.clearAuthData(),null;const t=await e.text().catch(()=>"");throw new Error(t||"Erro ao obter dados do usuário")}Xt("✅ AuthService: Resposta OK, processando dados");const t=e.headers.get("content-type")||"";let a=null,r=null;if(t.includes("application/json"))try{a=await e.json()}catch{r=await e.text().catch(()=>"")}else r=await e.text().catch(()=>"");if(!a)try{a=r?JSON.parse(r):{}}catch{throw new Error("Resposta do servidor inválida: conteúdo não JSON")}return Xt("📦 AuthService: Dados recebidos:",a),a}catch(e){return ea("💥 AuthService: Erro ao obter usuário atual:",e),this.clearAuthData(),null}}static async register(e){try{const t=await fetch(`${aa}/api/auth/register-public`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();if(!t.ok)throw new Error(a.error||a.details||"Erro ao registrar usuário")}catch(t){throw new Error(t instanceof Error?t.message:"Database error creating new user")}}static async resetPassword(e){try{const t=await fetch(`${aa}/api/auth/reset-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}),a=await t.json();if(!t.ok)throw new Error(a.error||"Erro ao solicitar recuperação de senha")}catch(t){throw new Error(t instanceof Error?t.message:"Erro ao solicitar recuperação de senha")}}static async updatePassword(e){if(!this.getToken())throw new Error("Token não encontrado");try{const t=await fetch(`${aa}/api/auth/update-password`,{method:"PUT",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify({newPassword:e})}),a=await t.json();if(!t.ok)throw new Error(a.error||"Erro ao atualizar senha")}catch(t){throw new Error(t instanceof Error?t.message:"Erro ao atualizar senha")}}static async updateUserPassword(e,t){try{const a=await fetch(`${aa}/api/auth/users/${e}/update-password`,{method:"PUT",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify({newPassword:t})}),r=await a.json();if(!a.ok)throw new Error(r.error||"Erro ao atualizar senha do usuário")}catch(a){throw new Error(a instanceof Error?a.message:"Erro ao atualizar senha do usuário")}}static isAuthenticated(){return!!this.getToken()}static getToken(){return"undefined"==typeof window?null:localStorage.getItem("auth_token")||localStorage.getItem("access_token")||localStorage.getItem("token")}static clearAuthData(){"undefined"!=typeof window&&(localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("auth-storage"))}static mapToFrontendUser(e){var t,a,r,s,o,n,i,l,c;return{id:(null==(t=e.member)?void 0:t.id)||e.user.id,nome:(null==(a=e.member)?void 0:a.nome)||e.user.nome||"",email:(null==(r=e.member)?void 0:r.email)||e.user.email,role:(null==(s=e.member)?void 0:s.role)||e.user.role||"equipe_interna",funcao:(null==(o=e.member)?void 0:o.funcao)||e.user.funcao,regional:(null==(n=e.member)?void 0:n.regional)||e.user.regional||"",ativo:(null==(i=e.member)?void 0:i.ativo)??!0,created_at:(null==(l=e.member)?void 0:l.created_at)||(new Date).toISOString(),updated_at:(null==(c=e.member)?void 0:c.updated_at)||(new Date).toISOString()}}}const sa=Kt()(Yt(e=>({user:null,isAuthenticated:!1,isLoading:!1,error:null,login:async(t,a)=>{try{e({isLoading:!0,error:null});const r=await ra.login(t,a),s=ra.mapToFrontendUser(r);e({user:s,isAuthenticated:!0,isLoading:!1})}catch(r){const t=r instanceof Error?r.message:"Erro ao fazer login";e({isLoading:!1,error:t})}},logout:()=>{ra.logout(),e({user:null,isAuthenticated:!1})},setUser:t=>{e({user:t,isAuthenticated:!0})},setLoading:t=>{e({isLoading:t})},checkAuth:async()=>{try{Xt("🔐 AuthStore: Iniciando checkAuth"),e({isLoading:!0}),Xt("📡 AuthStore: Chamando AuthService.getCurrentUser");const t=await ra.getCurrentUser();if(t){Xt("✅ AuthStore: Usuário encontrado:",t);const a=ra.mapToFrontendUser(t);e({user:a,isAuthenticated:!0,isLoading:!1})}else Xt("❌ AuthStore: Nenhum usuário encontrado"),e({user:null,isAuthenticated:!1,isLoading:!1})}catch(t){ea("💥 AuthStore: Erro ao verificar autenticação:",t),e({user:null,isAuthenticated:!1,isLoading:!1})}},register:async t=>{try{e({isLoading:!0,error:null}),await ra.register(t),e({isLoading:!1})}catch(a){const t=a instanceof Error?a.message:"Erro ao registrar usuário";e({isLoading:!1,error:t})}},resetPassword:async t=>{try{e({isLoading:!0,error:null}),await ra.resetPassword(t),e({isLoading:!1})}catch(a){const t=a instanceof Error?a.message:"Erro ao solicitar recuperação de senha";e({isLoading:!1,error:t})}},updatePassword:async t=>{try{e({isLoading:!0,error:null}),await ra.updatePassword(t),e({isLoading:!1})}catch(a){const t=a instanceof Error?a.message:"Erro ao atualizar senha";e({isLoading:!1,error:t})}},clearError:()=>{e({error:null})}}),{name:"auth-storage",partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated})})),oa=()=>{const{user:e,isAuthenticated:t,isLoading:a}=sa();return{user:e,isAuthenticated:t,isLoading:a}},na=()=>{const{login:e,logout:t,setUser:a,setLoading:r,checkAuth:s}=sa();return{login:e,logout:t,setUser:a,setLoading:r,checkAuth:s}},ia=(e,t)=>!!e&&(!t||("super_admin"===e.role||e.role===t)),la="/assets/logo%202-CdAIuzz7.png";function ca({children:t}){return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-secondary-50",children:e.jsxs("div",{className:"min-h-screen flex",children:[e.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-primary-600 to-primary-800 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute top-0 left-0 w-full h-full",children:e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 400 400",fill:"none",children:[e.jsx("defs",{children:e.jsx("pattern",{id:"grid",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:"white",strokeWidth:"1"})})}),e.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})})}),e.jsx("div",{className:"relative z-10 flex flex-col justify-center px-12 py-12 text-white",children:e.jsxs("div",{className:"max-w-md",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"w-56 h-56 bg-white/20 rounded-2xl flex items-center justify-center mb-4 backdrop-blur-sm",children:e.jsx("img",{src:la,alt:"Decolagem",className:"w-55 h-55 object-contain"})}),e.jsx("h1",{className:"text-3xl font-bold",children:"Programa de Superação da Pobreza"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-secondary-400 rounded-full"}),e.jsx("span",{className:"text-primary-100",children:"Gestão do programa As Maras"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-secondary-400 rounded-full"}),e.jsx("span",{className:"text-primary-100",children:"Gestão do programa Decolagem"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-secondary-400 rounded-full"}),e.jsx("span",{className:"text-primary-100",children:"Dashboards e Relatórios"})]})]})]})}),e.jsx("div",{className:"absolute bottom-0 right-0 w-32 h-32 bg-secondary-400/20 rounded-full -mr-16 -mb-16"}),e.jsx("div",{className:"absolute top-1/4 right-1/4 w-8 h-8 bg-secondary-300/30 rounded-full"}),e.jsx("div",{className:"absolute top-1/3 right-1/3 w-4 h-4 bg-white/20 rounded-full"})]}),e.jsx("div",{className:"flex-1 flex flex-col justify-center px-6 py-12 lg:px-12",children:e.jsxs("div",{className:"mx-auto w-full max-w-md",children:[e.jsxs("div",{className:"lg:hidden text-center mb-8",children:[e.jsx("div",{className:"w-56 h-56 bg-primary-100 rounded-2xl flex items-center justify-center mx-auto mb-4 relative",children:e.jsx("img",{src:la,alt:"Decolagem",className:"w-44 h-44 object-contain"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Programa de Superação da Pobreza"})]}),t]})})]})})}const da=()=>Math.random().toString(36).substr(2,9),ua=Kt((e,t)=>({notifications:[],confirmationDialog:null,addNotification:a=>{const r=da(),s={...a,id:r,duration:a.duration??5e3};return e(e=>({notifications:[...e.notifications,s]})),s.duration&&s.duration>0&&setTimeout(()=>{t().removeNotification(r)},s.duration),r},removeNotification:t=>{e(e=>({notifications:e.notifications.filter(e=>e.id!==t)}))},clearNotifications:()=>{e({notifications:[]})},showSuccess:(e,a,r)=>t().addNotification({type:"success",title:e,message:a,duration:r}),showError:(e,a,r)=>t().addNotification({type:"error",title:e,message:a,duration:r??8e3}),showWarning:(e,a,r)=>t().addNotification({type:"warning",title:e,message:a,duration:r}),showInfo:(e,a,r)=>t().addNotification({type:"info",title:e,message:a,duration:r}),showConfirmation:a=>new Promise(r=>{const s=da(),o={...a,id:s,confirmText:a.confirmText??"Confirmar",cancelText:a.cancelText??"Cancelar",onConfirm:()=>{a.onConfirm(),t().hideConfirmation(),r(!0)},onCancel:()=>{var e;null==(e=a.onCancel)||e.call(a),t().hideConfirmation(),r(!1)}};e({confirmationDialog:o})}),hideConfirmation:()=>{e({confirmationDialog:null})}})),ma=({id:t,type:r,title:s,message:o,duration:n=5e3,onClose:i})=>{const[l,c]=a.useState(!0),[d,u]=a.useState(!1);a.useEffect(()=>{if(n>0){const e=setTimeout(()=>{m()},n);return()=>clearTimeout(e)}},[n]);const m=()=>{u(!0),setTimeout(()=>{c(!1),i(t)},300)};return l?e.jsx("div",{className:`\n        fixed top-4 right-4 z-50 max-w-sm w-full\n        transform transition-all duration-300 ease-in-out\n        ${d?"translate-x-full opacity-0":"translate-x-0 opacity-100"}\n      `,children:e.jsxs("div",{className:`\n          ${(()=>{switch(r){case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";default:return"bg-blue-50 border-blue-200"}})()}\n          border rounded-lg shadow-lg p-4\n          flex items-start space-x-3\n        `,children:[e.jsx("div",{className:"flex-shrink-0",children:(()=>{switch(r){case"success":return e.jsx(N,{className:"w-5 h-5 text-green-500"});case"error":return e.jsx(j,{className:"w-5 h-5 text-red-500"});case"warning":return e.jsx(w,{className:"w-5 h-5 text-yellow-500"});default:return e.jsx(b,{className:"w-5 h-5 text-blue-500"})}})()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:s}),o&&e.jsx("p",{className:"text-sm text-gray-600",children:o})]}),e.jsx("button",{onClick:m,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(y,{className:"w-4 h-4"})})]})}):null},ha=()=>{const{notifications:t,removeNotification:a}=ua();return e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-3",children:t.map(t=>e.jsx(ma,{id:t.id,type:t.type,title:t.title,message:t.message,duration:t.duration,onClose:a},t.id))})},ga=()=>{const{confirmationDialog:t,hideConfirmation:a}=ua();if(!t)return null;return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:e=>{var a;e.target===e.currentTarget&&(null==(a=t.onCancel)||a.call(t))},children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(w,{className:"w-6 h-6 text-yellow-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t.title})]}),e.jsx("button",{onClick:t.onCancel,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(y,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-gray-800 text-base mb-6 leading-relaxed",children:t.message}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:t.onCancel,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:t.cancelText}),e.jsx("button",{onClick:t.onConfirm,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 transition-colors",children:t.confirmText})]})]})})},pa=({src:t,alt:r,className:s="",placeholder:o="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjNmNGY2Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5YTNhZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkNhcnJlZ2FuZG8uLi48L3RleHQ+PC9zdmc+",onLoad:n,onError:i,width:l,height:c,loading:d="lazy"})=>{const[u,m]=a.useState(!1),[h,g]=a.useState(!1),[p,f]=a.useState(!1),x=a.useRef(null);a.useEffect(()=>{const e=new IntersectionObserver(([t])=>{t.isIntersecting&&(f(!0),e.disconnect())},{threshold:.1,rootMargin:"50px"});return x.current&&e.observe(x.current),()=>e.disconnect()},[]);const v="eager"===d||p;return e.jsxs("div",{className:`relative overflow-hidden ${s}`,children:[!u&&!h&&e.jsx("img",{src:o,alt:"",className:"absolute inset-0 w-full h-full object-cover blur-sm","aria-hidden":"true"}),v&&e.jsx("img",{ref:x,src:t,alt:r,width:l,height:c,className:"w-full h-full object-cover transition-opacity duration-300 "+(u?"opacity-100":"opacity-0"),onLoad:()=>{m(!0),null==n||n()},onError:()=>{g(!0),null==i||i()},loading:d}),h&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("p",{className:"mt-2 text-sm",children:"Erro ao carregar imagem"})]})}),v&&!u&&!h&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]})},fa="/assets/Logo%20decolagem-CJ326f_m.png",xa=[{name:"Dashboard Geral",href:"/dashboard",icon:E},{name:"Dashboard Metas",href:"/dashboard/metas",icon:S},{name:"Regionais",href:"/regionais",icon:_},{name:"Instituições",href:"/ongs",icon:C},{name:"Calendário",href:"/calendario",icon:k},{name:"Configurações",href:"/configuracoes",icon:A,requiredRole:"super_admin"}];function va({children:t}){const[r,s]=a.useState(!1),[l,c]=a.useState([]),d=o(),u=n(),{user:m}=sa(),{logout:h}=na(),g=e=>"/dashboard"===e?"/dashboard"===d.pathname:d.pathname.startsWith(e),p=xa.filter(e=>!e.requiredRole||ia(m,e.requiredRole)),f=new Date,x=f.getHours(),v=(null==m?void 0:m.nome)?m.nome.split(" ")[0]:void 0,b=`${x<12?"Bom dia":x<18?"Boa tarde":"Boa noite"}${v?`, ${v}`:""}`,w=new Intl.DateTimeFormat("pt-BR",{weekday:"long",day:"2-digit",month:"long",year:"numeric"}).format(f);return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[r&&e.jsx("div",{className:"fixed inset-0 z-40 bg-gray-600 bg-opacity-75 lg:hidden",onClick:()=>s(!1)}),e.jsx("div",{className:`\n        fixed inset-y-0 left-0 z-50 w-64 bg-gradient-to-b from-pink-500 to-pink-600 shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0\n        ${r?"translate-x-0":"-translate-x-full"}\n      `,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-6 border-b border-pink-400",children:[e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx(pa,{src:fa,alt:"Decolagem",className:"w-[125px] h-auto max-h-30 object-contain filter invert brightness-0",width:125,height:120,loading:"eager"})}),e.jsx("button",{onClick:()=>s(!1),className:"lg:hidden p-1 rounded-md text-pink-200 hover:text-white",children:e.jsx(y,{className:"w-6 h-6"})})]}),e.jsx("nav",{className:"flex-1 px-4 py-4 space-y-1 overflow-y-auto",children:p.map(t=>{const a=t.icon;return e.jsx("div",{children:t.children?e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>{return e=t.name,void c(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]);var e},className:`\n                          w-full flex items-center justify-between px-3 py-2 text-sm font-medium rounded-lg transition-colors\n                          ${l.includes(t.name)?"bg-pink-400 text-white":"text-white hover:bg-pink-400"}\n                        `,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(a,{className:"w-5 h-5"}),e.jsx("span",{children:t.name})]}),e.jsx(M,{className:"w-4 h-4 transition-transform "+(l.includes(t.name)?"rotate-180":"")})]}),l.includes(t.name)&&e.jsx("div",{className:"mt-1 ml-6 space-y-1",children:t.children.filter(e=>!e.requiredRole||ia(m,e.requiredRole)).map(t=>{const a=t.icon;return e.jsxs(i,{to:t.href,className:`\n                                    flex items-center space-x-3 px-3 py-2 text-sm rounded-lg transition-colors\n                                    ${g(t.href)?"bg-pink-400 text-white border-r-2 border-white":"text-pink-100 hover:bg-pink-400 hover:text-white"}\n                                  `,onClick:()=>s(!1),children:[e.jsx(a,{className:"w-4 h-4"}),e.jsx("span",{children:t.name})]},t.name)})})]}):e.jsxs(i,{to:t.href,className:`\n                        flex items-center space-x-3 px-3 py-2 text-sm font-medium rounded-lg transition-colors\n                        ${g(t.href)?"bg-pink-400 text-white border-r-2 border-white":"text-white hover:bg-pink-400"}\n                      `,onClick:()=>s(!1),children:[e.jsx(a,{className:"w-5 h-5"}),e.jsx("span",{children:t.name})]})},t.name)})}),e.jsx("div",{className:"px-3 py-2 border-t border-pink-300",children:e.jsxs("div",{className:"flex items-center space-x-2 px-2 py-1",children:[e.jsx("div",{className:"w-8 h-8 bg-pink-400 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-medium",children:null==m?void 0:m.nome.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs leading-tight font-medium text-white truncate",children:null==m?void 0:m.nome}),e.jsx("p",{className:"text-[10px] leading-tight text-pink-200 truncate",children:"super_admin"===(null==m?void 0:m.role)?"Super Admin":"Equipe Interna"})]})]})})]})}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 lg:ml-64",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between h-16 px-4 sm:px-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>s(!0),className:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100",children:e.jsx(I,{className:"w-6 h-6"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:b}),e.jsx("p",{className:"text-xs text-gray-500",children:w})]})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(pa,{src:"/assets/AF_Logo_Gerando%20Falcoes-MONOCOR-Ctx8lxQJ.png",alt:"Gerando Falcões",className:"w-auto h-[34px] object-contain",width:102,height:34,loading:"eager"}),e.jsxs("button",{onClick:()=>{h(),u("/login")},className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-md",children:[e.jsx(P,{className:"w-5 h-5"}),e.jsx("span",{children:"Sair"})]})]})})]})}),e.jsx("main",{className:"flex-1 p-4 sm:p-6 overflow-auto",children:t})]}),e.jsx(ha,{}),e.jsx(ga,{})]})}var ya=function(e,t){for(var a={};e.length;){var r=e[0],s=r.code,o=r.message,n=r.path.join(".");if(!a[n])if("unionErrors"in r){var i=r.unionErrors[0].errors[0];a[n]={message:i.message,type:i.code}}else a[n]={message:o,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var l=a[n].types,c=l&&l[r.code];a[n]=Q(n,t,a,s,c?[].concat(c,r.message):r.message)}e.shift()}return a},ba=function(e,t,a){return void 0===a&&(a={}),function(r,s,o){try{return Promise.resolve(function(s,n){try{var i=Promise.resolve(e["sync"===a.mode?"parse":"parseAsync"](r,t)).then(function(e){return o.shouldUseNativeValidation&&K({},o),{errors:{},values:a.raw?r:e}})}catch(Ge){return n(Ge)}return i&&i.then?i.then(void 0,n):i}(0,function(e){if(function(e){return Array.isArray(null==e?void 0:e.errors)}(e))return{values:{},errors:Z(ya(e.errors,!o.shouldUseNativeValidation&&"all"===o.criteriaMode),o)};throw e}))}catch(Ge){return Promise.reject(Ge)}}};function wa(...e){return te(ae(e))}const ja={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"},Na={primary:"text-primary-500",white:"text-white",gray:"text-gray-400"};function Ea({size:t="md",className:a,color:r="primary"}){return e.jsx("div",{className:wa("flex items-center justify-center",a),children:e.jsxs("svg",{className:wa("animate-spin",ja[t],Na[r]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})}const Sa=Y({email:X().min(1,"Email é obrigatório").email("Email inválido"),password:X().min(1,"Senha é obrigatória").min(6,"Senha deve ter pelo menos 6 caracteres")});function _a(){const[t,r]=a.useState(!1),[s,o]=a.useState(!1),i=n(),{login:l}=na(),{register:c,handleSubmit:d,formState:{errors:u}}=ee({resolver:ba(Sa)});return e.jsxs("main",{className:"space-y-6","aria-labelledby":"login-title",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-6 flex justify-center",children:e.jsx("img",{src:fa,alt:"Decolagem",className:"w-56 h-56 object-contain",style:{filter:"brightness(0) saturate(100%) invert(18%) sepia(89%) saturate(2476%) hue-rotate(315deg) brightness(95%) contrast(95%)",WebkitFilter:"brightness(0) saturate(100%) invert(18%) sepia(89%) saturate(2476%) hue-rotate(315deg) brightness(95%) contrast(95%)"}})}),e.jsx("h2",{id:"login-title",className:"text-3xl font-bold text-gray-900",children:"Programa de Superação da Pobreza"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Faça login para acessar o sistema"})]}),e.jsxs("form",{onSubmit:d(async e=>{o(!0);try{await l(e.email,e.password),yt.success("Login realizado com sucesso!"),i("/dashboard")}catch(t){yt.error(t instanceof Error?t.message:"Erro ao fazer login")}finally{o(!1)}}),className:"space-y-6","aria-describedby":"form-status",noValidate:!0,children:[e.jsx("div",{id:"form-status","aria-live":"polite",className:"sr-only",children:s?"Processando login…":u.email||u.password?"Há erros no formulário.":"Pronto para enviar."}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"label",children:"Email"}),e.jsx("div",{className:"relative",children:e.jsx("input",{...c("email"),type:"email",id:"email",autoComplete:"email",autoFocus:!0,spellCheck:"false","aria-invalid":!!u.email,"aria-describedby":u.email?"email-error":void 0,className:"input "+(u.email?"border-red-300 focus:border-red-500 focus:ring-red-500":""),placeholder:"seu@email.com",disabled:s})}),u.email&&e.jsx("p",{id:"email-error",role:"alert",className:"mt-1 text-sm text-red-600",children:u.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"label",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{...c("password"),type:t?"text":"password",id:"password",autoComplete:"current-password","aria-invalid":!!u.password,"aria-describedby":u.password?"password-error":void 0,className:"input pr-10 "+(u.password?"border-red-300 focus:border-red-500 focus:ring-red-500":""),placeholder:"Sua senha",disabled:s}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>r(!t),"aria-label":t?"Ocultar senha":"Mostrar senha","aria-pressed":t,disabled:s,children:t?e.jsx(T,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(O,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),u.password&&e.jsx("p",{id:"password-error",role:"alert",className:"mt-1 text-sm text-red-600",children:u.password.message})]}),e.jsx("button",{type:"submit",disabled:s,className:"w-full btn-primary flex items-center justify-center py-2 px-4 text-sm","aria-busy":s,children:s?e.jsxs(e.Fragment,{children:[e.jsx(Ea,{size:"sm",color:"white",className:"mr-2"}),e.jsx("span",{className:"sr-only",children:"Carregando"}),"Entrando..."]}):"Entrar"})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Problemas para acessar?"," ",e.jsx("button",{type:"button",className:"font-medium text-primary-600 hover:text-primary-500",onClick:()=>yt("Fale com seu Líder"),children:"Fale com seu Líder"})]})})]})}const Ca=x("https://ldfldwfvspclsnpgjgmv.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxkZmxkd2Z2c3BjbHNucGdqZ212Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkyNzM1MjQsImV4cCI6MjA3NDg0OTUyNH0.I_c31K314-UdDKWG4YxMFePAqoVjHVU8wvGHZbX0a28");const ka=()=>{const e=localStorage.getItem("auth_token"),t=m(),{data:r,isLoading:s,error:o,refetch:n}=h({queryKey:["regional-activities"],queryFn:async()=>{if(!e)throw new Error("Usuário não autenticado");const t=await fetch(`${aa}/api/regional-activities`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Erro ao carregar atividades regionais");const a=await t.json();return a.data||a},enabled:!!e,staleTime:0,gcTime:3e5,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!0,refetchInterval:!1});return a.useEffect(()=>{if(!Ca)return;const e=Ca.channel("regional_activities_changes").on("postgres_changes",{event:"*",schema:"public",table:"regional_activities"},e=>{t.invalidateQueries({queryKey:["regional-activities"]}),t.refetchQueries({queryKey:["regional-activities"]})}).subscribe(e=>{});return()=>{Ca.removeChannel(e)}},[t]),a.useEffect(()=>{},[r]),{data:r,loading:s,error:(null==o?void 0:o.message)||null,refetch:n}},Aa=(e=!1)=>{var t,r,s;const o=localStorage.getItem("auth_token"),{user:n}=sa(),i=m(),{data:l,isLoading:c,error:d,refetch:u}=h({queryKey:["calendar-events",(null==n?void 0:n.regional)||"no-regional"],queryFn:async()=>{if(!o)throw new Error("Usuário não autenticado");const t=e?"/api/calendar-events?global=true":"/api/calendar-events",a=await fetch(`${aa}${t}`,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error("Erro ao carregar eventos de calendário");const r=await a.json();return r.data||r},enabled:!!o,staleTime:0,gcTime:3e5,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!0,refetchInterval:!1}),p=g({mutationFn:async e=>{if(!o)throw new Error("Usuário não autenticado");const t=await fetch(`${aa}/api/calendar-events`,{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.error||"Erro ao criar evento de calendário")}const a=await t.json();return a.data||a},onSuccess:()=>{i.invalidateQueries({queryKey:["calendar-events"]})},onError:e=>{}}),f=g({mutationFn:({eventId:e,eventData:t})=>(async(e,t)=>{if(!o)throw new Error("Usuário não autenticado");const a=await fetch(`${aa}/api/calendar-events/${e}`,{method:"PUT",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok){const e=await a.json();throw new Error(e.error||"Erro ao atualizar evento de calendário")}const r=await a.json();return r.data||r})(e,t),onSuccess:()=>{i.invalidateQueries({queryKey:["calendar-events"]})},onError:e=>{}}),x=g({mutationFn:async e=>{if(!o)throw new Error("Usuário não autenticado");const t=await fetch(`${aa}/api/calendar-events/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});if(!t.ok){const e=await t.json();throw new Error(e.error||"Erro ao excluir evento de calendário")}return!0},onSuccess:()=>{i.invalidateQueries({queryKey:["calendar-events"]})},onError:e=>{}});return a.useEffect(()=>{if(!Ca)return;const e=Ca.channel("calendar_events_changes").on("postgres_changes",{event:"*",schema:"public",table:"calendar_events"},e=>{i.invalidateQueries({queryKey:["calendar-events"]}),i.refetchQueries({queryKey:["calendar-events"]})}).subscribe(e=>{});return()=>{Ca.removeChannel(e)}},[i]),{data:l,loading:c,error:(null==d?void 0:d.message)||null,refetch:u,createEvent:p.mutateAsync,updateEvent:(e,t)=>f.mutateAsync({eventId:e,eventData:t}),deleteEvent:x.mutateAsync,isCreating:p.isPending,isUpdating:f.isPending,isDeleting:x.isPending,createError:(null==(t=p.error)?void 0:t.message)||null,updateError:(null==(r=f.error)?void 0:r.message)||null,deleteError:(null==(s=x.error)?void 0:s.message)||null}};function Ma(){const e=m(),{data:t,isLoading:r,error:s,refetch:o}=h({queryKey:["goals"],queryFn:async()=>{const{GoalService:e}=await v(async()=>{const{GoalService:e}=await import("./goalService-Cb-uZcTs.js");return{GoalService:e}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]));return await e.getGoals()},staleTime:0,gcTime:3e5,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!0});return a.useEffect(()=>{if(!Ca)return;const t=Ca.channel("goals_changes").on("postgres_changes",{event:"*",schema:"public",table:"goals"},t=>{e.invalidateQueries({queryKey:["goals"]}),e.refetchQueries({queryKey:["goals"]})}).subscribe();return()=>{Ca.removeChannel(t)}},[e]),{data:t||[],loading:r,error:s instanceof Error?s.message:null,refetch:o}}function Ia(){return function(e,t={immediate:!0}){const[r,s]=a.useState(null),[o,n]=a.useState(!1),[i,l]=a.useState(null),c=a.useCallback(async()=>{const t=localStorage.getItem("auth_token");if(t){n(!0),l(null);try{const a=await fetch(`${aa}${e}`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),r=a.headers.get("content-type")||"";let o=null,n=null;if(r.includes("application/json"))try{o=await a.json()}catch(Ue){n=await a.text().catch(()=>"")}else n=await a.text().catch(()=>"");if(!a.ok){const e=o&&o.error?o.error:n||`Erro ${a.status}: ${a.statusText}`;throw new Error(e)}if(!o)try{o=n?JSON.parse(n):{}}catch{throw new Error("Resposta do servidor inválida: conteúdo não JSON")}if(o.error)throw new Error(o.error);const i=void 0!==o.data?o.data:o;s(i)}catch(a){l(a instanceof Error?a.message:"Erro desconhecido")}finally{n(!1)}}else l("Usuário não autenticado")},[e]);return a.useEffect(()=>{const e=localStorage.getItem("auth_token");t.immediate&&e&&c()},[e,t.immediate,c]),{data:r,loading:o,error:i,refetch:c,postData:async t=>{const a=localStorage.getItem("auth_token");if(!a)return l("Usuário não autenticado"),null;n(!0),l(null);try{const r=await fetch(`${aa}${e}`,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(t)}),s=r.headers.get("content-type")||"";let o=null,n=null;if(s.includes("application/json"))try{o=await r.json()}catch(Ue){n=await r.text().catch(()=>"")}else n=await r.text().catch(()=>"");if(!r.ok){const e=o&&o.error?o.error:n||`Erro ${r.status}: ${r.statusText}`;throw new Error(e)}if(!o)try{o=n?JSON.parse(n):{}}catch{throw new Error("Resposta do servidor inválida: conteúdo não JSON")}if(o.error)throw new Error(o.error);return void 0!==o.data?o.data:o}catch(r){return l(r instanceof Error?r.message:"Erro desconhecido"),null}finally{n(!1)}}}}("/api/regionals/users")}function Pa(){const[e,t]=a.useState([]),[r,s]=a.useState(!0),[o,n]=a.useState(null),i=a.useCallback(async()=>{s(!0),n(null);try{const e=localStorage.getItem("auth_token");if(!e)throw new Error("Token de autenticação não encontrado");const a=await fetch(`${aa}/api/regionals/users`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error(`Erro ao buscar usuários: ${a.status}`);const r=await a.json(),s=r.users||r;t(s)}catch(e){n(e instanceof Error?e.message:"Erro desconhecido")}finally{s(!1)}},[]);return a.useEffect(()=>{i()},[i]),{data:e,loading:r,error:o,refetch:i}}function Ta(){const e=localStorage.getItem("auth_token"),t=m(),{data:r,isLoading:s,error:o,refetch:n}=h({queryKey:["microcredito"],queryFn:async()=>{if(!e)throw new Error("Usuário não autenticado");const t=await fetch(`${aa}/api/microcredito`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Erro ao carregar dados do microcrédito");const a=await t.json();return a.data||a},enabled:!!e,staleTime:0,gcTime:3e5,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!0,refetchInterval:!1});return a.useEffect(()=>{if(!Ca)return;const e=Ca.channel("microcredito_changes").on("postgres_changes",{event:"*",schema:"public",table:"emprestimos_microcredito"},e=>{t.invalidateQueries({queryKey:["microcredito"]}),t.refetchQueries({queryKey:["microcredito"]})}).subscribe();return()=>{Ca.removeChannel(e)}},[t]),{data:r,loading:s,error:(null==o?void 0:o.message)||null,refetch:n}}function Oa(){const e=localStorage.getItem("auth_token"),t=m(),{data:r,isLoading:s,error:o,refetch:n}=h({queryKey:["asmaras"],queryFn:async()=>{if(!e)throw new Error("Usuário não autenticado");const t=await fetch(`${aa}/api/asmaras`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Erro ao carregar dados do As Maras");const a=await t.json();return a.data||a},enabled:!!e,staleTime:0,gcTime:3e5,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!0,refetchInterval:!1});return a.useEffect(()=>{if(!Ca)return;const e=Ca.channel("asmaras_changes").on("postgres_changes",{event:"*",schema:"public",table:"participantes_asmaras"},e=>{t.invalidateQueries({queryKey:["asmaras"]}),t.refetchQueries({queryKey:["asmaras"]})}).subscribe();return()=>{Ca.removeChannel(e)}},[t]),{data:r,loading:s,error:(null==o?void 0:o.message)||null,refetch:n}}function La(){const e=localStorage.getItem("auth_token"),t=m(),{data:r,isLoading:s,error:o,refetch:n}=h({queryKey:["decolagem"],queryFn:async()=>{if(!e)throw new Error("Usuário não autenticado");const t=await fetch(`${aa}/api/decolagem`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Erro ao carregar dados do Decolagem");const a=await t.json();return a.data||a},enabled:!!e,staleTime:0,gcTime:3e5,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!0,refetchInterval:!1});return a.useEffect(()=>{if(!Ca)return;const e=Ca.channel("decolagem_changes").on("postgres_changes",{event:"*",schema:"public",table:"familias_decolagem"},e=>{t.invalidateQueries({queryKey:["decolagem"]}),t.refetchQueries({queryKey:["decolagem"]})}).subscribe();return()=>{Ca.removeChannel(e)}},[t]),{data:r,loading:s,error:(null==o?void 0:o.message)||null,refetch:n}}class za{static getAuthHeaders(){const e=localStorage.getItem("auth_token");return e?{Authorization:`Bearer ${e}`}:{}}static async createInstituicao(e){try{const t=await fetch(`${aa}/api/instituicoes`,{method:"POST",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();if(!t.ok)throw new Error(a.error||"Erro ao criar instituição");return a.data}catch(t){throw new Error(t instanceof Error?t.message:"Erro ao criar instituição")}}static async getInstituicoes(){try{const e=await fetch(`${aa}/api/instituicoes`,{headers:this.getAuthHeaders()}),t=await e.json();if(!e.ok)throw new Error(t.error||"Erro ao buscar instituições");return t.data||[]}catch(e){throw new Error(e instanceof Error?e.message:"Erro ao buscar instituições")}}static async getInstituicaoById(e){try{const t=await fetch(`${aa}/api/instituicoes/${e}`,{headers:this.getAuthHeaders()}),a=await t.json();if(!t.ok)throw new Error(a.error||"Erro ao buscar instituição");return a.data}catch(t){throw new Error(t instanceof Error?t.message:"Erro ao buscar instituição")}}static async updateInstituicao(e,t){try{const a=await fetch(`${aa}/api/instituicoes/${e}`,{method:"PUT",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await a.json();if(!a.ok)throw new Error(r.error||"Erro ao atualizar instituição");return r.data}catch(a){throw new Error(a instanceof Error?a.message:"Erro ao atualizar instituição")}}static async deleteInstituicao(e){try{const t=await fetch(`${aa}/api/instituicoes/${e}`,{method:"DELETE",headers:this.getAuthHeaders()});if(!t.ok){const e=await t.json();throw new Error(e.error||"Erro ao deletar instituição")}}catch(t){throw new Error(t instanceof Error?t.message:"Erro ao deletar instituição")}}static async marcarEvasao(e,t){try{const a=await fetch(`${aa}/api/instituicoes/${e}/evasao`,{method:"PATCH",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await a.json();if(!a.ok)throw new Error(r.error||"Erro ao marcar evasão");return r.data}catch(a){throw new Error(a instanceof Error?a.message:"Erro ao marcar evasão")}}static async getStats(){try{const e=await fetch(`${aa}/api/instituicoes/stats`,{method:"GET",headers:{"Content-Type":"application/json",...this.getAuthHeaders()}});if(!e.ok){const t=await e.json().catch(()=>({}));throw new Error(t.error||`HTTP ${e.status}: ${e.statusText}`)}return(await e.json()).data}catch(e){throw e}}static async refreshStats(){return this.getStats()}}const Da=Object.freeze(Object.defineProperty({__proto__:null,InstituicaoService:za},Symbol.toStringTag,{value:"Module"}));function $a(){const[e,t]=a.useState(null),[r,s]=a.useState(!0),[o,n]=a.useState(null),i=a.useCallback(async()=>{try{s(!0),n(null);const e=await za.getStats();t(e)}catch(e){n(e instanceof Error?e.message:"Erro ao carregar estatísticas")}finally{s(!1)}},[]),l=a.useCallback(()=>i(),[i]);return a.useEffect(()=>{i()},[i]),a.useEffect(()=>{if(!Ca)return;const e=Ca.channel("instituicao-stats").on("postgres_changes",{event:"*",schema:"public",table:"instituicoes"},e=>{i()}).on("postgres_changes",{event:"*",schema:"public",table:"regional_activities"},e=>{i()}).subscribe(e=>{});return()=>{try{Ca.removeChannel(e)}catch(t){}}},[i]),{data:e,loading:r,error:o,refetch:l}}const Fa={up:{text:"text-green-600",bg:"bg-green-100",icon:D},down:{text:"text-red-600",bg:"bg-red-100",icon:z},neutral:{text:"text-gray-600",bg:"bg-gray-100",icon:L}};function Ra({title:t,value:a,change:r,trend:s="neutral",icon:o,color:n="primary",isLoading:i=!1,percentage:l,goalValue:c,iconColor:d="default",customMetaText:u,hideMetaPercentage:m=!1}){return Fa[s].icon,i?e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-3 flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-2/3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-1/2"})]}),e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg animate-pulse"})]})}):e.jsxs("div",{className:wa("group relative overflow-hidden rounded-2xl border-0 p-6 shadow-lg transition-all duration-300 hover:shadow-xl hover:-translate-y-1 bg-gradient-to-br","primary"===n&&"from-blue-50 via-white to-blue-50/50 border border-blue-100/50","secondary"===n&&"from-purple-50 via-white to-purple-50/50 border border-purple-100/50","success"===n&&"from-green-50 via-white to-green-50/50 border border-green-100/50","warning"===n&&"from-yellow-50 via-white to-yellow-50/50 border border-yellow-100/50","error"===n&&"from-red-50 via-white to-red-50/50 border border-red-100/50"),children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 opacity-5",children:e.jsx("div",{className:wa("w-full h-full rounded-full","primary"===n&&"bg-blue-500","secondary"===n&&"bg-purple-500","success"===n&&"bg-green-500","warning"===n&&"bg-yellow-500","error"===n&&"bg-red-500")})}),e.jsxs("div",{className:"relative flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsx("p",{className:"text-sm font-semibold text-gray-700 truncate",children:t})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide",children:"Realizado"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600 leading-none",children:a})]}),void 0!==l&&e.jsx("div",{className:"flex items-center justify-end gap-2 mb-3",children:e.jsxs("div",{className:wa("flex items-center gap-1 px-2 py-1 rounded-full text-sm font-semibold",l>=80?"bg-green-100 text-green-700":l>=60?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:[Math.round(l),"%"]})}),c&&e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide",children:u||"Meta"}),!m&&e.jsx("span",{className:"text-lg font-bold text-emerald-600 bg-emerald-50 px-2 py-1 rounded-lg border border-emerald-200",children:c.toLocaleString("pt-BR")})]}),!m&&(()=>{const t=parseInt(a.replace(/\D/g,""))||0,r=Math.max(0,c-t),s=c>0?Math.round(r/c*100):0;return r>0?e.jsx("div",{className:"flex items-center gap-1 mr-4",children:e.jsxs("span",{className:"text-xs font-semibold text-orange-600 bg-orange-50 px-2 py-1 rounded-full border border-orange-200",children:["Faltam ",s,"%"]})}):e.jsx("div",{className:"flex items-center gap-1 mr-4",children:e.jsx("span",{className:"text-xs font-semibold text-green-600 bg-green-50 px-2 py-1 rounded-full border border-green-200",children:"✓ Meta atingida"})})})()]})})]}),e.jsx("div",{className:wa("flex-shrink-0 w-10 h-10 rounded-xl flex items-center justify-center shadow-sm transition-all duration-300 group-hover:scale-110","decolagem"===d&&"bg-blue-500 text-white","maras"===d&&"bg-pink-500 text-white","light-red"===d&&"bg-red-400 text-white","green"===d&&"bg-green-500 text-white","default"===d&&"primary"===n&&"bg-blue-500 text-white","default"===d&&"secondary"===n&&"bg-purple-500 text-white","default"===d&&"success"===n&&"bg-green-500 text-white","default"===d&&"warning"===n&&"bg-yellow-500 text-white","default"===d&&"error"===n&&"bg-red-500 text-white"),children:e.jsx(o,{className:"w-5 h-5"})})]})]})}function Ba({title:t,subtitle:r,type:s,data:o,isLoading:n=!1,lineColor:i,lineBgOpacity:l=.12,showMovingAverage:c=!1,movingAverageWindow:d=3,movingAvgColor:u="#10B981",movingAvgLabel:m="Média móvel"}){const h=a.useRef(null),g=(e,t)=>{const a=e.replace("#",""),r=parseInt(a,16);return`rgba(${r>>16&255}, ${r>>8&255}, ${255&r}, ${t})`},p={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"white",bodyColor:"white",borderColor:i||"#EC4899",borderWidth:1,cornerRadius:8,displayColors:!1}},scales:{x:{grid:{display:!1},border:{display:!1},ticks:{color:"#6B7280",font:{size:12}}},y:{grid:{color:"#F3F4F6"},border:{display:!1},ticks:{color:"#6B7280",font:{size:12}}}},elements:{line:{tension:.4},point:{radius:4,hoverRadius:6}}},f={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:24,usePointStyle:!0,font:{size:13,weight:"500"},color:"#374151",boxWidth:12,boxHeight:12}},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"#F9FAFB",bodyColor:"#F9FAFB",borderColor:"rgba(59, 130, 246, 0.5)",borderWidth:1,cornerRadius:12,padding:12,titleFont:{size:14,weight:"600"},bodyFont:{size:13,weight:"500"},callbacks:{label:function(e){var t,a,r,s;const o=e.label||"",n=e.parsed,i=((null==(s=null==(r=null==(a=null==(t=e.chart)?void 0:t.data)?void 0:a.datasets)?void 0:r[0])?void 0:s.data)||[]).reduce((e,t)=>e+t,0),l=i?(n/i*100).toFixed(1):"0.0";return`${o}: ${n.toLocaleString()} ONGs (${l}%)`}}}},cutout:"65%",animation:{animateRotate:!0,animateScale:!0,duration:1e3}},x=()=>{if(!o||!Array.isArray(o))return{labels:[],datasets:[]};if("line"===s){const e=i||"#EC4899",t=o.map(e=>e.name),a=o.map(e=>e.value),r=[{label:"Dados",data:a,borderColor:e,backgroundColor:g(e,l),fill:!0,borderWidth:2}];if(c){const e=v(a,d);r.push({label:m,data:e,borderColor:u,backgroundColor:"transparent",fill:!1,borderWidth:2,borderDash:[6,6],pointRadius:0})}return{labels:t,datasets:r}}return"doughnut"===s?{labels:o.map(e=>e.name),datasets:[{data:o.map(e=>e.value),backgroundColor:o.map(e=>e.color),borderWidth:3,borderColor:"#ffffff",hoverBorderWidth:4,hoverBorderColor:"#ffffff",hoverOffset:12,spacing:2}]}:"bar"===s?{labels:o.map(e=>e.name),datasets:[{label:"Programas",data:o.map(e=>e.value),backgroundColor:o.map(e=>e.color),hoverBorderWidth:2,hoverBorderColor:"#ffffff",borderWidth:0,maxBarThickness:48}]}:{labels:[],datasets:[]}},v=(e,t)=>{const a=Math.max(1,Math.floor(t));return e.map((t,r)=>{const s=Math.max(0,r-a+1),o=e.slice(s,r+1),n=o.reduce((e,t)=>e+("number"==typeof t?t:0),0);return o.length?+(n/o.length).toFixed(2):0})};return n?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-5 bg-gray-200 rounded animate-pulse w-32"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-24"})]}),e.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded animate-pulse"})]}),e.jsx("div",{className:"h-64 flex items-center justify-center",children:e.jsx(Ea,{size:"lg"})})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t}),r&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r})]}),e.jsx("button",{className:"p-1 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100",children:e.jsx($,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"h-64",children:["line"===s&&e.jsx(ge,{ref:h,data:x(),options:p}),"doughnut"===s&&e.jsx(pe,{ref:h,data:x(),options:f}),"bar"===s&&e.jsx(fe,{ref:h,data:x(),options:qa}),"pie"===s&&e.jsx(pe,{ref:h,data:x(),options:f})]})]})}re.register(se,oe,ne,ie,le,ce,de,ue,me,he);const qa={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0,font:{size:12},generateLabels:e=>{const t=e.data.datasets[0];return e.data.labels.map((e,a)=>({text:e,fillStyle:Array.isArray(t.backgroundColor)?t.backgroundColor[a]:t.backgroundColor,hidden:!1,index:a}))}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"white",bodyColor:"white",borderColor:"#EC4899",borderWidth:1,cornerRadius:8,callbacks:{label:function(e){var t,a,r,s;const o=e.label||"",n=e.parsed.y,i=((null==(s=null==(r=null==(a=null==(t=e.chart)?void 0:t.data)?void 0:a.datasets)?void 0:r[0])?void 0:s.data)||[]).reduce((e,t)=>e+t,0);return`${o}: ${n} (${i?(n/i*100).toFixed(1):"0.0"}%)`}}}},scales:{x:{grid:{display:!1},border:{display:!1},ticks:{color:"#6B7280",font:{size:12}}},y:{grid:{color:"#F3F4F6"},border:{display:!1},ticks:{color:"#6B7280",font:{size:12}}}},datasets:{bar:{borderRadius:6,borderSkipped:!1}},animation:{duration:800}},Va=(e,t)=>!t||t<=0?0:Math.min(100,Math.round(e/t*100));function Ja(){var t,r,s,o,n,i,l,c;const{user:d}=oa(),{data:u,loading:g}=(()=>{const e=localStorage.getItem("auth_token"),t=m(),{data:r,isLoading:s,error:o,refetch:n}=h({queryKey:["activities"],queryFn:async()=>{if(!e)throw new Error("Usuário não autenticado");const t=await fetch(`${aa}/api/regional-activities`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Erro ao carregar atividades");const a=await t.json(),r=a.data||a;return Array.isArray(r)&&r.filter(e=>[e.atividade_label,e.titulo,e.tipo,e.categoria].filter(Boolean).some(e=>e&&e.toLowerCase().includes("famílias embarcadas decolagem"))),r},enabled:!!e,staleTime:0,gcTime:3e5,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!0,refetchInterval:!1});return a.useEffect(()=>{if(!Ca)return;const e=Ca.channel("activities_changes").on("postgres_changes",{event:"*",schema:"public",table:"regional_activities"},e=>{t.invalidateQueries({queryKey:["activities"]}),t.refetchQueries({queryKey:["activities"]})}).subscribe(e=>{});return()=>{Ca.removeChannel(e)}},[t]),a.useEffect(()=>{},[r]),{data:r,loading:s,error:(null==o?void 0:o.message)||null,refetch:n}})(),{data:p,loading:f,refetch:x}=Ma(),{data:v,loading:y}=Ia(),{data:b,loading:j}=Ta(),{data:N,loading:_}=Oa(),{data:k,loading:A}=La(),{data:M,refetch:I}=ka(),{data:P,loading:T}=$a();a.useEffect(()=>{if(!Ca)return;const e=Ca.channel("dashboard_changes").on("postgres_changes",{event:"*",schema:"public",table:"goals"},e=>{x()}).on("postgres_changes",{event:"*",schema:"public",table:"regional_activities"},e=>{I()}).subscribe(e=>{});return()=>{Ca.removeChannel(e)}},[x,I]);const O=a.useMemo(()=>Array.isArray(u)?u:Array.isArray(null==u?void 0:u.data)?u.data:[],[u]),L=a.useMemo(()=>Array.isArray(p)?p:[],[p]),z=a.useMemo(()=>Array.isArray(v)?v:[],[v]),D=a.useMemo(()=>Array.isArray(b)?b:[],[b]),$=a.useMemo(()=>Array.isArray(N)?N:[],[N]),K=a.useMemo(()=>Array.isArray(k)?k:[],[k]),Z=a.useCallback(e=>(e||"").toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").trim(),[]),Q=a.useCallback(e=>Z(e).replace(/[^a-z0-9]+/g," ").split(/\s+/).filter(Boolean).map(e=>{let t=e;t.endsWith("s")&&(t=t.slice(0,-1));return{ongs:"ong",ong:"ong",ligas:"liga",liga:"liga",diagnosticos:"diagnostico",diagnostico:"diagnostico",familias:"familia",familia:"familia","retençao":"retencao",retencao:"retencao",nps:"nps",maras:"maras",mara:"maras",decolagem:"decolagem",nacional:"nacional"}[t]||t}),[Z]),Y=a.useCallback((e,t)=>{const a=Q(e),r=Q(t);if(0===a.length||0===r.length)return!1;const s=new Set(a),o=r.filter(e=>s.has(e)),n=r.includes("decolagem")||r.includes("maras"),i=o.includes("decolagem")||o.includes("maras"),l=Math.min(r.length,2);return n?i&&o.length>=l:o.length>=l},[Q]),X=a.useCallback((e,t)=>[e.atividade_label,e.titulo,e.tipo,e.categoria].filter(Boolean).some(e=>Y(e,t)),[Y]),ee=a.useCallback(e=>{if(!e)return!1;const t=new Date(e),a=new Date;return t.getFullYear()===a.getFullYear()&&t.getMonth()===a.getMonth()&&t.getDate()===a.getDate()},[]),te=a.useCallback((e,t)=>O.reduce((a,r)=>{const s=e.some(e=>X(r,e));if(!s)return a;if(null==t?void 0:t.todayOnly){const e=r.activity_date||r.data_inicio||r.created_at||r.data||r.date;if(!ee(e))return a}const o=r.quantidade??r.qtd??1,n="number"==typeof o?o:parseFloat(String(o));return a+(isNaN(n)?1:n)},0),[O,X,ee]),ae=a.useCallback(e=>L.filter(t=>{const a=[t.titulo,t.descricao,t.nome,t.atividade_tipo,t.categoria].filter(Boolean);return e.some(e=>a.some(t=>Y(t,e)))}).reduce((e,t)=>{const a=t.valorMeta??t.valor_meta??0,r="number"==typeof a?a:parseFloat(String(a));return e+(isNaN(r)?0:r)},0),[L,Y]),re=a.useCallback(e=>{const t=L.filter(t=>{const a=[t.titulo,t.descricao,t.nome,t.atividade_tipo,t.categoria].filter(Boolean);return e.some(e=>a.some(t=>Y(t,e)))}),a=t.filter(e=>{const t=(e.regional??"").toString().toLowerCase();return t.includes("nacional")||t.includes("todas")});return(a.length>0?a:t).reduce((e,t)=>{const a=t.valorMeta??t.valor_meta??0,r="number"==typeof a?a:parseFloat(String(a));return e+(isNaN(r)?0:r)},0)},[L,Y]),se=a.useMemo(()=>({participantes:{total:z.length,meta:1500,percentual:Va(z.length,1500)},atividades:{total:O.length,meta:100,percentual:Va(O.length,100)},metas:{total:L.length,concluidas:L.filter(e=>e.valor_atual>=e.valor_meta).length,percentual:Va(L.filter(e=>e.valor_atual>=e.valor_meta).length,L.length||1)}}),[z,O,L,Va]),oe=a.useCallback(()=>{if(!M||!Array.isArray(M))return 0;const e=M.filter(e=>{const t=(e.titulo||"").toLowerCase(),a=(e.tipo||"").toLowerCase(),r=(e.descricao||"").toLowerCase();return t.includes("nps")||a.includes("nps")||r.includes("nps")});if(0===e.length)return 0;const t=e.reduce((e,t)=>e+(parseFloat(t.quantidade)||0),0);return e.length>0?Number((t/e.length).toFixed(1)):0},[M]),ne=a.useMemo(()=>({asMaras:{participantes:$.length,ongsTotal:new Set($.map(e=>e.ong_id).filter(Boolean)).size,ongsMeta:150,ligasTotal:Math.ceil($.length/6),ligasMeta:20,retencaoPercentual:$.length>0?Math.round($.filter(e=>"ativo"===e.status).length/$.length*100):0,retencaoMetaPercentual:90,evasaoTotal:$.filter(e=>"inativo"===e.status).length},decolagem:{familias:K.length,ongsTotal:new Set(K.map(e=>e.ong_id).filter(Boolean)).size,ongsMeta:100,familiasMeta:600,npsNota:oe(),npsMeta:9,evasaoTotal:K.filter(e=>"inativo"===e.status).length},microcredito:{emprestimos:D.length,valorTotal:D.reduce((e,t)=>e+(t.valor_aprovado||0),0),inadimplencia:D.filter(e=>"inadimplente"===e.status).length,inadimplenciaPercentual:te(["Inadimplência"])}}),[$,K,D,oe]);a.useMemo(()=>{var e,t;return{programas:[{name:"ONGs Decolagem",value:(null==(e=null==P?void 0:P.resumo)?void 0:e.ongsDecolagem)||0,color:"#3B82F6"},{name:"ONGs Maras",value:(null==(t=null==P?void 0:P.resumo)?void 0:t.ongsMaras)||0,color:"#EC4899"}],atividadesRegional:[{name:"Nacional",value:40,color:"#14B8A6"},{name:"Norte",value:18,color:"#10B981"},{name:"Nordeste",value:22,color:"#3B82F6"},{name:"Centro-Oeste",value:12,color:"#F59E0B"},{name:"Sudeste",value:28,color:"#8B5CF6"},{name:"Sul",value:15,color:"#EF4444"}],inadimplencia:[{month:"Jan",value:0},{month:"Fev",value:0},{month:"Mar",value:0},{month:"Abr",value:0},{month:"Mai",value:0},{month:"Jun",value:ne.microcredito.inadimplenciaPercentual}],familiasEvolucao:[{month:"Jan",value:Math.max(300,ne.decolagem.familias-200)},{month:"Fev",value:Math.max(320,ne.decolagem.familias-180)},{month:"Mar",value:Math.max(340,ne.decolagem.familias-160)},{month:"Abr",value:Math.max(360,ne.decolagem.familias-140)},{month:"Mai",value:Math.max(380,ne.decolagem.familias-120)},{month:"Jun",value:ne.decolagem.familias}]}},[se,ne,P]);const ie=a.useMemo(()=>{var e;const t=(new Date).getFullYear(),a=new Array(12).fill(0);O.forEach(e=>{if(!(X(e,"Famílias Embarcadas Decolagem")||X(e,"familias_embarcadas_decolagem")))return;const r=e.activity_date||e.data_inicio||e.created_at||e.data||e.date,s=r?new Date(r):null;if(!s||isNaN(s.getTime())||s.getFullYear()!==t)return;const o=s.getMonth(),n=e.quantidade??e.qtd??1,i="number"==typeof n?n:parseFloat(String(n));a[o]+=isNaN(i)?1:i});if(a.every(e=>0===e)&&(null==(e=null==ne?void 0:ne.decolagem)?void 0:e.familias)>0){const e=ne.decolagem.familias;for(let t=0;t<12;t++){const r=Math.pow((t+1)/12,1.2),s=Math.round(e*r)-(t>0?Math.round(e*Math.pow(t/12,1.2)):0);a[t]=Math.max(0,s)}}return["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"].map((e,t)=>({name:e,value:a[t]}))},[O,X,ne]),le=a.useMemo(()=>{const e=(new Date).getFullYear(),t=new Array(12).fill(0);O.forEach(a=>{if(!(X(a,"Diagnósticos Realizados")||X(a,"diagnosticos_realizados")))return;const r=a.activity_date||a.data_inicio||a.created_at||a.data||a.date,s=r?new Date(r):null;if(!s||isNaN(s.getTime())||s.getFullYear()!==e)return;const o=s.getMonth(),n=a.quantidade??a.qtd??1,i="number"==typeof n?n:parseFloat(String(n));t[o]+=isNaN(i)?1:i});if(t.every(e=>0===e)){const e=te(["Diagnósticos Realizados","diagnosticos_realizados"]);if(e>0)for(let a=0;a<12;a++){const r=Math.pow((a+1)/12,1.2),s=Math.round(e*r)-(a>0?Math.round(e*Math.pow(a/12,1.2)):0);t[a]=Math.max(0,s)}}return["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"].map((e,a)=>({name:e,value:t[a]}))},[O,X,te]),ce=te(["Famílias Embarcadas Decolagem","familias_embarcadas_decolagem"]),de=4*ce,ue=re(["Famílias Embarcadas Decolagem","familias_embarcadas_decolagem"])||1e4,me=te(["Diagnósticos Realizados","diagnosticos_realizados"]),he=re(["Diagnósticos Realizados","diagnosticos_realizados"])||12e3,ge=(null==(t=null==P?void 0:P.resumo)?void 0:t.ongsDecolagem)||0,pe=re(["ONGs Decolagem","ongs_decolagem"])||240,fe=(null==(r=null==P?void 0:P.resumo)?void 0:r.ongsMaras)||0,xe=re(["ONGs Maras","ongs_maras"])||100,ve=te(["Ligas Maras Formadas","ligas_maras_formadas"]),ye=ve>0?ve:ne.asMaras.ligasTotal,be=re(["Ligas Maras Formadas","ligas_maras_formadas"])||1600,we=6*ye,je=a.useCallback(()=>{const e=O.filter(e=>X(e,"Leads do dia")||X(e,"Leads do Dia")||X(e,"leads_do_dia"));if(0===e.length)return 0;const t=e.sort((e,t)=>{const a=new Date(e.activity_date||e.data_inicio||e.created_at||0);return new Date(t.activity_date||t.data_inicio||t.created_at||0).getTime()-a.getTime()})[0],a=t.quantidade??t.qtd??0,r="number"==typeof a?a:parseFloat(String(a));return isNaN(r)?0:r},[O,X]),Ne=a.useCallback(()=>te(["Leads do dia","Leads do Dia","leads_do_dia","leads","Leads"]),[te]),Ee=je(),Se=Ne();ne.decolagem.familiasMeta;ae(["Leads do dia","Leads do Dia","leads_do_dia"]);const _e=te(["Processo seletivo","seletivas","Processo Seletivo"]),Ce=re(["Processo seletivo","seletivas","Processo Seletivo"])||50,ke=te(["Conversão de Leads","conversao_leads","Conversao de Leads"]),Ae=re(["Conversão de Leads","conversao_leads","Conversao de Leads"])||100,Me=te(["Imersão Maras","imersao","Imersao Maras"]),Ie=re(["Imersão Maras","imersao","Imersao Maras"])||50,Pe=te(["Encontro Líder Maras","encontro_lider_maras","Encontro Lider Maras"]),Te=re(["Encontro Líder Maras","encontro_lider_maras","Encontro Lider Maras"])||30,Oe=(null==(s=null==P?void 0:P.porPrograma)?void 0:s.decolagem)&&void 0!==(null==(o=null==P?void 0:P.evasaoPorPrograma)?void 0:o.decolagem)?Math.round(P.porPrograma.decolagem/(P.porPrograma.decolagem+P.evasaoPorPrograma.decolagem)*100||0):0,Le=(null==(n=null==P?void 0:P.porPrograma)?void 0:n.as_maras)&&void 0!==(null==(i=null==P?void 0:P.evasaoPorPrograma)?void 0:i.as_maras)?Math.round(P.porPrograma.as_maras/(P.porPrograma.as_maras+P.evasaoPorPrograma.as_maras)*100||0):0,ze=ae(["Retenção Decolagem","Retencao Decolagem","retencao_decolagem"])||90,De=ae(["Retenção Maras","Retencao Maras","retencao_maras"])||ne.asMaras.retencaoMetaPercentual;return g||f||y||j||_||A||T?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-purple-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Dashboard Geral"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Bem-vindo(a) de volta, ",(null==d?void 0:d.nome)||"Super Administrador","! Os dados são atualizados em tempo real!"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(Ra,{title:"Famílias Embarcadas Decolagem",value:ce.toString(),icon:F,trend:Va(ce,ue)>=80?"up":"down",color:"secondary",goalValue:ue,iconColor:"decolagem"}),e.jsx(Ra,{title:"Diagnósticos Realizados",value:me.toString(),icon:R,trend:Va(me,he)>=80?"up":"down",color:"secondary",goalValue:he,iconColor:"decolagem"}),e.jsx(Ra,{title:"ONGs Decolagem (Ativas)",value:ge.toString(),icon:E,trend:Va(ge,pe)>=80?"up":"down",color:"secondary",goalValue:pe,iconColor:"decolagem"}),e.jsx(Ra,{title:"ONGs Maras (Ativas)",value:fe.toString(),icon:C,trend:Va(fe,xe)>=80?"up":"down",color:"secondary",goalValue:xe,iconColor:"maras"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(Ra,{title:"Retenção Decolagem",value:`${Oe}%`,icon:B,trend:Oe>=ze?"up":"down",color:"secondary",goalValue:ze,iconColor:"decolagem"}),e.jsx(Ra,{title:"Retenção Maras",value:`${Le}%`,icon:B,trend:Le>=De?"up":"down",color:"secondary",goalValue:De,iconColor:"maras"}),e.jsx(Ra,{title:"Ligas Maras Formadas",value:ye.toString(),icon:q,trend:Va(ye,be)>=80?"up":"down",color:"secondary",goalValue:be,iconColor:"maras"}),e.jsx(Ra,{title:"Total Maras",value:we.toString(),icon:V,trend:"neutral",color:"secondary",goalValue:1,customMetaText:"(A Liga é composta por 6 Maras)",hideMetaPercentage:!0,iconColor:"maras"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(Ra,{title:"Imersão Maras",value:Me.toString(),icon:J,trend:Va(Me,Ie)>=80?"up":"down",color:"secondary",goalValue:Ie,iconColor:"maras"}),e.jsx(Ra,{title:"Encontro Líder Maras",value:Pe.toString(),icon:H,trend:Va(Pe,Te)>=80?"up":"down",color:"secondary",goalValue:Te,iconColor:"maras"}),e.jsx(Ra,{title:"Total de Pessoas Atendidas",value:de.toString(),icon:F,trend:"neutral",color:"secondary",iconColor:"green"}),e.jsx(Ra,{title:"Leads do dia",value:`${Ee}`,icon:U,trend:Ee>0?"up":"down",color:"secondary",iconColor:"green"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(Ra,{title:"Total de Leads",value:Se.toString(),icon:V,trend:"neutral",color:"secondary",iconColor:"green"}),e.jsx(Ra,{title:"Conversão de Leads",value:ke.toString(),icon:S,trend:Va(ke,Ae)>=80?"up":"down",color:"secondary",goalValue:Ae,iconColor:"green"}),e.jsx(Ra,{title:"Processo Seletivo",value:_e.toString(),icon:W,trend:Va(_e,Ce)>=80?"up":"down",color:"secondary",goalValue:Ce,iconColor:"green"}),e.jsx(Ra,{title:"NPS",value:oe()>0?oe().toString():Math.round(10*(ne.decolagem.npsNota||0)).toString(),icon:G,trend:(oe()>0?oe():Math.round(10*(ne.decolagem.npsNota||0)))>=(ae(["NPS","nps"])||70)?"up":"down",change:Va(oe()>0?oe():Math.round(10*(ne.decolagem.npsNota||0)),ae(["NPS","nps"])||70),color:"secondary",goalValue:ae(["NPS","nps"])||70,iconColor:"green"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(Ra,{title:"Evasão Decolagem",value:((null==(l=null==P?void 0:P.evasaoPorPrograma)?void 0:l.decolagem)||0).toString(),icon:w,trend:"down",color:"error",iconColor:"light-red"}),e.jsx(Ra,{title:"Evasão Maras",value:((null==(c=null==P?void 0:P.evasaoPorPrograma)?void 0:c.as_maras)||0).toString(),icon:w,trend:"down",color:"error",iconColor:"light-red"}),e.jsx(Ra,{title:"Inadimplência",value:`${ne.microcredito.inadimplenciaPercentual}%`,icon:w,trend:"down",change:ne.microcredito.inadimplenciaPercentual,color:"error",iconColor:"light-red"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(Ba,{title:"Evolução Famílias Embarcadas Decolagem",subtitle:`Ano ${(new Date).getFullYear()} • valores mensais`,type:"line",data:ie,lineColor:"#3B82F6",showMovingAverage:!0,movingAverageWindow:3,movingAvgColor:"#10B981",movingAvgLabel:"Média móvel (3 meses)"}),e.jsx(Ba,{title:"Evolução Diagnósticos Realizados",subtitle:`Ano ${(new Date).getFullYear()} • valores mensais`,type:"line",data:le,lineColor:"#8B5CF6",showMovingAverage:!0,movingAverageWindow:3,movingAvgColor:"#10B981",movingAvgLabel:"Média móvel (3 meses)"})]})]})}function Ha({children:t,requiredRole:a,redirectTo:r="/login"}){const{user:s,isAuthenticated:o,isLoading:n}=oa();return n?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsx(Ea,{size:"lg"})}):o&&s?a&&!ia(s,a)?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Acesso Negado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Você não tem permissão para acessar esta página."}),e.jsx("button",{onClick:()=>window.history.back(),className:"btn-primary",children:"Voltar"})]})}):e.jsx(e.Fragment,{children:t}):e.jsx(l,{to:r,replace:!0})}const Ua=a.lazy(()=>v(()=>import("./DashboardMetasPage-BSNAIo7H.js"),__vite__mapDeps([10,1,2,11,4,6,3,5,7,8,9]))),Wa=a.lazy(()=>v(()=>import("./CalendarioPage-C7mh3jCh.js"),__vite__mapDeps([12,1,2,13,14,6,8,5,11,15,16,3,4,7,9]))),Ga=a.lazy(()=>v(()=>import("./RegionalCalendarioPage-FhjQA_ht.js"),__vite__mapDeps([17,1,2,13,14,11,6,18,15,8,16,3,4,5,7,9]))),Ka=a.lazy(()=>v(()=>import("./AsMarasPage-Cju6idvd.js"),__vite__mapDeps([19,1,2,6,3,4,5,7,8,9]))),Za=a.lazy(()=>v(()=>import("./MicrocreditoPage-CFb_7Say.js"),__vite__mapDeps([20,1,2,6,3,4,5,7,8,9]))),Qa=a.lazy(()=>v(()=>import("./DecolagemPage-De4vhplQ.js"),__vite__mapDeps([21,1,2,6,3,4,5,7,8,9]))),Ya=a.lazy(()=>v(()=>import("./RegionaisPage-B9PxnmtP.js"),__vite__mapDeps([22,1,2,13,14,23,6,4,5,11,3,7,8,9]))),Xa=a.lazy(()=>v(()=>import("./GestaoAtividadesRegionaisPage-DwKj1cxg.js"),__vite__mapDeps([24,1,2,3,13,14,18,6,11,8,16,4,5,7,9]))),er=a.lazy(()=>v(()=>import("./EditarAtividadeRegionalPage-DMWOTvNg.js"),__vite__mapDeps([25,1,2,4,14,13,23,6,11,3,5,7,8,9]))),tr=a.lazy(()=>v(()=>import("./OngCadastroPage-Bnltl6Nr.js"),__vite__mapDeps([26,1,2,13,14,3,6,4,5,7,8,9]))),ar=a.lazy(()=>v(()=>import("./OngListPage-BfPI8fwT.js"),__vite__mapDeps([27,1,2,13,14,6,3,4,5,7,8,9]))),rr=a.lazy(()=>v(()=>import("./OngDetalhesPage-Cv_mUxge.js"),__vite__mapDeps([28,1,2,13,14,3,6,4,5,7,8,9]))),sr=a.lazy(()=>v(()=>import("./Configuracoes-CPqv15Oi.js"),__vite__mapDeps([29,5,1,2,14,0,3,4,6,7,8,9])));function or(){const{user:t,isAuthenticated:r,isLoading:s,checkAuth:o}=sa();return a.useEffect(()=>{o()},[o]),s?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsx(Ea,{size:"lg"})}):e.jsxs(c,{children:[e.jsx(d,{path:"/login",element:r&&t?e.jsx(l,{to:"/dashboard",replace:!0}):e.jsx(ca,{children:e.jsx(_a,{})})}),e.jsx(d,{path:"/*",element:e.jsx(Ha,{children:e.jsx(va,{children:e.jsx(a.Suspense,{fallback:e.jsx(Ea,{size:"lg"}),children:e.jsxs(c,{children:[e.jsx(d,{path:"/dashboard",element:e.jsx(Ja,{})}),e.jsx(d,{path:"/dashboard/metas",element:e.jsx(Ua,{})}),e.jsx(d,{path:"/calendario",element:e.jsx(Wa,{})}),e.jsx(d,{path:"/programas/as-maras",element:e.jsx(Ka,{})}),e.jsx(d,{path:"/programas/microcredito",element:e.jsx(Za,{})}),e.jsx(d,{path:"/programas/decolagem",element:e.jsx(Qa,{})}),e.jsx(d,{path:"/regionais",element:e.jsx(Ya,{})}),e.jsx(d,{path:"/regionais/calendario",element:e.jsx(Ga,{})}),e.jsx(d,{path:"/regionais/gestao-atividades",element:e.jsx(Xa,{})}),e.jsx(d,{path:"/regionais/atividades/editar/:id",element:e.jsx(er,{})}),e.jsx(d,{path:"/ongs",element:e.jsx(ar,{})}),e.jsx(d,{path:"/ongs/cadastrar",element:e.jsx(tr,{})}),e.jsx(d,{path:"/ongs/editar/:id",element:e.jsx(tr,{})}),e.jsx(d,{path:"/ongs/detalhes/:id",element:e.jsx(rr,{})}),e.jsx(d,{path:"/configuracoes",element:e.jsx(Ha,{requiredRole:"super_admin",children:e.jsx(sr,{})})}),e.jsx(d,{path:"/",element:e.jsx(l,{to:"/dashboard",replace:!0})}),e.jsx(d,{path:"*",element:e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"404"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Página não encontrada"}),e.jsx("button",{onClick:()=>window.history.back(),className:"btn-primary",children:"Voltar"})]})})})]})})})})})]})}const nr=()=>{const[e,t]=a.useState([]),r=a.useCallback(e=>{const a=Math.random().toString(36).substr(2,9),r={id:a,...e};return t(e=>[...e,r]),a},[]),s=a.useCallback(e=>{t(t=>t.filter(t=>t.id!==e))},[]),o=a.useCallback((e,t,a)=>r({type:"success",title:e,message:t,duration:a}),[r]),n=a.useCallback((e,t,a)=>r({type:"error",title:e,message:t,duration:a}),[r]),i=a.useCallback((e,t,a)=>r({type:"warning",title:e,message:t,duration:a}),[r]),l=a.useCallback((e,t,a)=>r({type:"info",title:e,message:t,duration:a}),[r]),c=a.useCallback(()=>{t([])},[]);return{toasts:e,addToast:r,removeToast:s,success:o,error:n,warning:i,info:l,clearAll:c}},ir=()=>{const{toasts:t,removeToast:a}=nr();return e.jsx("div",{className:"fixed top-0 right-0 z-50 p-4 space-y-2",children:t.map(t=>e.jsx(ma,{id:t.id,type:t.type,title:t.title,message:t.message,duration:t.duration,onClose:a},t.id))})},lr=a.createContext(void 0),cr=()=>{const e=a.useContext(lr);if(!e)throw new Error("useToastContext deve ser usado dentro de um ToastProvider");return e},dr=({children:t})=>{const{success:a,error:r,warning:s,info:o,clearAll:n}=nr(),i={success:a,error:r,warning:s,info:o,clearAll:n};return e.jsxs(lr.Provider,{value:i,children:[t,e.jsx(ir,{})]})};if(import.meta&&{}){const e=(...e)=>{};console.log=e,console.debug=e,console.info=e,console.warn=e,console.error=(...e)=>{e.some(e=>"string"==typeof e&&(e.includes("❌")||e.includes("Elemento root não encontrado")||e.includes("Erro crítico")))}}const ur=new p({defaultOptions:{queries:{staleTime:3e5,gcTime:6e5,retry:2,refetchOnWindowFocus:!1}}}),mr=document.getElementById("root");if(!mr)throw new Error("Elemento root não encontrado");xe.createRoot(mr).render(e.jsx(s.StrictMode,{children:e.jsx(f,{client:ur,children:e.jsxs(u,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[e.jsx(dr,{children:e.jsx(or,{})}),e.jsx(vt,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#fff",color:"#1f2937",boxShadow:"0 10px 40px -10px rgba(0, 0, 0, 0.15)",border:"1px solid #e5e7eb"},success:{iconTheme:{primary:"#22c55e",secondary:"#fff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})}));export{aa as A,za as I,pa as L,Ma as a,Pa as b,$a as c,ka as d,Aa as e,sa as f,ua as g,Oa as h,Ta as i,La as j,ra as k,cr as l,Ia as m,Ea as n,wa as o,Da as p,Ca as s,oa as u};
