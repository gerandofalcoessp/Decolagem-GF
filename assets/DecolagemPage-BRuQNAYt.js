import{j as e}from"./ui-C_BmRRy8.js";import{r as s}from"./vendor-Psgnp9ei.js";import{j as a}from"./index-3h40CfT8.js";import{J as t,D as l,U as r,n as i,r as d,G as n,F as c,i as o}from"./icons-sb5RvF5O.js";import"./router-DVMx2JKX.js";import"./query-BI71cv7L.js";import"./supabase-CfsjXCJe.js";import"./forms-BADiA78i.js";import"./utils-CwAUyRUs.js";import"./charts-C4lFoNLr.js";function x(){const[x,m]=s.useState(""),{data:h,loading:g,error:p}=a(),j={totalFamilias:(null==h?void 0:h.length)||0,ongsAtivas:new Set(null==h?void 0:h.map(e=>e.ong).filter(Boolean)).size||0,diagnosticosRealizados:(null==h?void 0:h.filter(e=>"Concluído"===e.diagnostico).length)||0,taxaRetencao:h&&h.length>0?Math.round(h.filter(e=>"Ativa"===e.status).length/h.length*100):0},u=(null==h?void 0:h.filter(e=>"Concluído"===e.diagnostico).length)||0,N=(null==h?void 0:h.filter(e=>"Em Andamento"===e.diagnostico).length)||0,y=(null==h?void 0:h.filter(e=>"Pendente"===e.diagnostico).length)||0,f=u+N+y,b={concluidos:f>0?Math.round(u/f*100):0,emAndamento:f>0?Math.round(N/f*100):0,pendentes:f>0?Math.round(y/f*100):0};return g?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-lg text-gray-600",children:"Carregando dados..."})}):p?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-lg text-red-600",children:["Erro ao carregar dados: ",p]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Programa Decolagem"}),e.jsx("p",{className:"text-gray-600",children:"Diagnósticos de Famílias"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white text-sm rounded-lg hover:bg-purple-700 transition-colors",children:[e.jsx(t,{className:"w-4 h-4 mr-2"}),"Novo Diagnóstico"]}),e.jsxs("button",{className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white text-sm rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(l,{className:"w-4 h-4 mr-2"}),"Nova Família"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(r,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Famílias"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j.totalFamilias})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(i,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"ONGs Ativas"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j.ongsAtivas})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(t,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Diagnósticos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j.diagnosticosRealizados})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(d,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Taxa Retenção"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[j.taxaRetencao,"%"]})]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(n,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Buscar famílias...",value:x,onChange:e=>m(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),e.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(c,{className:"w-4 h-4 mr-2"}),"Filtros"]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Progresso dos Diagnósticos"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[e.jsx("span",{children:"Diagnósticos Concluídos"}),e.jsxs("span",{children:[b.concluidos,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${b.concluidos}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[e.jsx("span",{children:"Em Andamento"}),e.jsxs("span",{children:[b.emAndamento,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-600 h-2 rounded-full",style:{width:`${b.emAndamento}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[e.jsx("span",{children:"Pendentes"}),e.jsxs("span",{children:[b.pendentes,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-red-600 h-2 rounded-full",style:{width:`${b.pendentes}%`}})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Famílias Recentes"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Família"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ONG"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Diagnóstico"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data Ingresso"}),e.jsx("th",{className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:"Ações"})})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h&&h.length>0?h.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.nome||s.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:s.ong||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("Ativa"===s.status||"ativo"===s.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("Concluído"===s.diagnostico?"bg-blue-100 text-blue-800":"Em Andamento"===s.diagnostico?"bg-yellow-100 text-yellow-800":"bg-orange-100 text-orange-800"),children:s.diagnostico})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(s.dataIngresso||s.created_at).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:e.jsx(o,{className:"w-4 h-4"})})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"Nenhuma família encontrada"})})})]})})]})]})}export{x as default};
