import{r as e}from"./vendor-Psgnp9ei.js";import{A as r}from"./index-3h40CfT8.js";import{j as a}from"./ui-C_BmRRy8.js";import{B as o}from"./Button-DPj5z5IW.js";import{X as s,I as n,A as t,Y as l,C as c}from"./icons-sb5RvF5O.js";function i(){const[a,o]=e.useState([]),[s,n]=e.useState(!0),[t,l]=e.useState(null),c=e.useCallback(async()=>{n(!0),l(null);try{const e=localStorage.getItem("auth_token");if(!e)throw new Error("Token de autenticação não encontrado");const a=await fetch(`${r}/api/regionals/users`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const s=(await a.json()).users||[];if(!Array.isArray(s))throw new Error("Dados de usuários inválidos");const n=new Map,t=s.find(e=>{var r;return"nacional"===(null==(r=e.funcao)?void 0:r.toLowerCase())});n.set("Comercial",{regional:"Comercial",totalMembros:0,coordenadores:[],consultores:[],liderNacional:t?{nome:t.nome||t.email,email:t.email,funcao:t.funcao||"Nacional"}:void 0}),s.forEach((e,r)=>{var a,o,s;let l=e.regional||"Sem Regional";if(l.startsWith("R. ")&&(l=l.substring(3)),"nacional"===(null==(a=e.funcao)?void 0:a.toLowerCase())||"líder nacional"===(null==(o=e.funcao)?void 0:o.toLowerCase())||"diretor operações"===(null==(s=e.funcao)?void 0:s.toLowerCase())){n.has("Nacional")||n.set("Nacional",{regional:"Nacional",totalMembros:0,coordenadores:[],consultores:[]});const r=n.get("Nacional");return r.totalMembros++,void r.coordenadores.push({nome:e.nome||e.email,email:e.email,funcao:e.funcao})}if(!l&&!e.funcao)return;n.has(l)||n.set(l,{regional:l,totalMembros:0,coordenadores:[],consultores:[]});const c=n.get(l);if(c.totalMembros++,e.funcao){const r=e.funcao.toLowerCase(),a={nome:e.nome||e.email,email:e.email,funcao:e.funcao};switch(r){case"líder regional":case"lider regional":c.liderRegional=a;break;case"coordenador":c.coordenadores.push(a);break;case"consultor":c.consultores.push(a)}}t&&"Nacional"===l&&(c.liderNacional={nome:t.nome||t.email,email:t.email,funcao:t.funcao||"Nacional"})});const l=Array.from(n.values());o(l)}catch(e){l(e instanceof Error?e.message:"Erro desconhecido")}finally{n(!1)}},[]);return e.useEffect(()=>{localStorage.getItem("auth_token")?c():(n(!1),l("Usuário não autenticado"))},[c]),{data:a,loading:s,error:t,refetch:c}}const u=({isOpen:e,onClose:r,title:i,message:u,type:d="info"})=>{if(!e)return null;return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:`bg-white rounded-lg shadow-xl max-w-md w-full mx-4 border-2 ${(()=>{switch(d){case"success":return"border-green-200";case"error":return"border-red-200";case"warning":return"border-yellow-200";default:return"border-blue-200"}})()}`,children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[(()=>{switch(d){case"success":return a.jsx(c,{className:"w-6 h-6 text-green-500"});case"error":return a.jsx(l,{className:"w-6 h-6 text-red-500"});case"warning":return a.jsx(t,{className:"w-6 h-6 text-yellow-500"});default:return a.jsx(n,{className:"w-6 h-6 text-blue-500"})}})(),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:i})]}),a.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(s,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"p-6",children:a.jsx("p",{className:"text-gray-600 leading-relaxed",children:u})}),a.jsx("div",{className:"flex items-center justify-end p-6 border-t border-gray-200",children:a.jsx(o,{onClick:r,className:`px-6 py-2 text-white ${(()=>{switch(d){case"success":return"bg-green-600 hover:bg-green-700";case"error":return"bg-red-600 hover:bg-red-700";case"warning":return"bg-yellow-600 hover:bg-yellow-700";default:return"bg-blue-600 hover:bg-blue-700"}})()}`,children:"OK"})})]})})};export{u as N,i as u};
